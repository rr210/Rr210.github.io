{"title":"ajax的学习 整理","slug":"ajaxnote","date":"2021-03-30T11:31:32.000Z","updated":"2021-09-04T13:28:17.616Z","comments":true,"path":"api/articles/ajaxnote.json","excerpt":null,"covers":null,"content":"<h2 id=\"Ajax运行原理\"><a href=\"#Ajax运行原理\" class=\"headerlink\" title=\"Ajax运行原理\"></a>Ajax运行原理</h2><blockquote>\n<p>Ajax相当于浏览器发送请求与接受响应的代理人,以实现不影响用户浏览页面的情况下，局部更新页面数据，从而提高用户体验</p>\n</blockquote>\n<h2 id=\"实现步骤\"><a href=\"#实现步骤\" class=\"headerlink\" title=\"实现步骤\"></a>实现步骤</h2><ol>\n<li>创建Ajax对象  <code>new XMLHttpRequest()</code></li>\n<li>告诉Ajax请求地址以及请求方式 <code> open</code></li>\n<li>发送请求<code> send</code>方法</li>\n<li>获取服务器端给予客户端的响应数据 onload   获取响应数据<code> responseText</code></li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1. 创建ajax对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\"><span class=\"comment\">// 2. 告诉ajax对象发送的位置，和方式,第一个参数是请求方式，第二个请求地址</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">&#x27;get&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/first&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 3. 发送请求</span></span><br><span class=\"line\">xhr.send()</span><br><span class=\"line\"><span class=\"comment\">// 4. 获取响应数据</span></span><br><span class=\"line\">xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xhr.responseText);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"响应的数据格式\"><a href=\"#响应的数据格式\" class=\"headerlink\" title=\"响应的数据格式\"></a>响应的数据格式</h2><ol>\n<li>json对象作为响应数据的格式，请求返回的数据为json字符串</li>\n<li>将json字符串转化为json对象</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1. 创建ajax对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\"><span class=\"comment\">// 2. 告诉ajax对象发送的位置，和方式,第一个参数是请求方式，第二个请求地址</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">&#x27;get&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/responseData&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 3. 发送请求</span></span><br><span class=\"line\">xhr.send()</span><br><span class=\"line\"><span class=\"comment\">// 4. 获取响应数据，接受完请求后onload事件自动响应</span></span><br><span class=\"line\">xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"comment\">// 返回的是字符串类型</span></span><br><span class=\"line\"><span class=\"comment\">// console.log(xhr.responseText);</span></span><br><span class=\"line\"><span class=\"comment\">// 将json字符串转换为json对象</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> respnseText = <span class=\"built_in\">JSON</span>.parse(xhr.responseText)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(respnseText);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> respnseText);</span><br><span class=\"line\"><span class=\"comment\">// 将转换的json对象中的信息获取，并且将数据信息渲染到页面中</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"string\">`&lt;h2&gt;<span class=\"subst\">$&#123;respnseText.name&#125;</span>&lt;/h2&gt;`</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.innerHTML = str</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"请求参数传递\"><a href=\"#请求参数传递\" class=\"headerlink\" title=\"请求参数传递\"></a>请求参数传递</h2><ol>\n<li>get请求<code>xx.open(&#39;get&#39;,url)</code></li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">        <span class=\"keyword\">let</span> username =<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#username&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">let</span> email =<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#email&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">let</span> submit =<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#submit&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 给按钮添加一个点击事件</span></span><br><span class=\"line\">        submit.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 获取从用户在表单中输入的值</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> emaildata = email.value</span><br><span class=\"line\">            <span class=\"keyword\">let</span> usernamedata = username.value</span><br><span class=\"line\">            <span class=\"comment\">// 对获取到数据进行字符串的拼接</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> str = <span class=\"string\">`username=<span class=\"subst\">$&#123;usernamedata&#125;</span>&amp;email=<span class=\"subst\">$&#123;emaildata&#125;</span>`</span></span><br><span class=\"line\">            <span class=\"comment\">// 创建一个ajax对象</span></span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(str);</span><br><span class=\"line\">            <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\">            <span class=\"comment\">// 创建ajax对象的请求方式</span></span><br><span class=\"line\">            xhr.open(<span class=\"string\">&#x27;get&#x27;</span>,<span class=\"string\">`http://localhost:3000/get?<span class=\"subst\">$&#123;str&#125;</span>`</span>)</span><br><span class=\"line\">            xhr.send()</span><br><span class=\"line\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(xhr.responseText);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"comment\">// res.send(req.query)</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<ol start=\"2\">\n<li>get请求只能的请求头类型只能是<code>application/x-www-form-urlencoded</code>,并且在解析请求地址时通过 body-parser中的urlencoded()方法进行解析,get请求不能提交对象数据格式的</li>\n</ol>\n<h2 id=\"post请求方式\"><a href=\"#post请求方式\" class=\"headerlink\" title=\"post请求方式\"></a>post请求方式</h2><ol>\n<li>请求的方式为json时，如果要得到请求的json内容 需要使用 body-parser中的bodyPaser.json()方法</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1. 创建ajax对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\"><span class=\"comment\">// 2. 告诉ajax对象发送的位置，和方式,第一个参数是请求方式，第二个请求地址</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">&#x27;post&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/json&#x27;</span>)</span><br><span class=\"line\">xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>,<span class=\"string\">&#x27;application/json&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 3. 发送请求</span></span><br><span class=\"line\">xhr.send(<span class=\"built_in\">JSON</span>.stringify(&#123;<span class=\"attr\">name</span>:<span class=\"string\">&#x27;list&#x27;</span>,<span class=\"attr\">age</span>:<span class=\"number\">50</span>&#125;))</span><br><span class=\"line\"><span class=\"comment\">// 4. 获取响应数据，接受完请求后onload事件自动响应</span></span><br><span class=\"line\">xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 返回的是字符串类型</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(xhr.responseText);</span><br><span class=\"line\">    <span class=\"comment\">// 将json字符串转换为json对象</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"ajax状态码\"><a href=\"#ajax状态码\" class=\"headerlink\" title=\"ajax状态码\"></a>ajax状态码</h2><ol>\n<li>获取服务器端的响应</li>\n<li>0 请求未初始化</li>\n<li>1 请求以及简历，但是还没有发送</li>\n<li>2 请求已经发送</li>\n<li>3 表示请求正在处理中，部分代码可以使用</li>\n<li>4 响应已经完成  </li>\n<li>xhr.readyState  获取Ajax状态码  onreadystatechange事件</li>\n<li>onload比以上事件的请求方式更为效率</li>\n</ol>\n<h2 id=\"ajax错误处理\"><a href=\"#ajax错误处理\" class=\"headerlink\" title=\"ajax错误处理\"></a>ajax错误处理</h2><ol>\n<li>xhr.status获取http状态码 400<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> btn = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;btn&#x27;</span>)</span><br><span class=\"line\">      <span class=\"comment\">// 当用户点击后发送错误请求</span></span><br><span class=\"line\">      btn.onclick=<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\">          xhr.open(<span class=\"string\">&#x27;get&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/error&#x27;</span>)</span><br><span class=\"line\">          <span class=\"comment\">// 对请求的http的状态码进行判断</span></span><br><span class=\"line\">          xhr.send();</span><br><span class=\"line\">          xhr.onload=<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.log(xhr.status);</span><br><span class=\"line\">              <span class=\"keyword\">if</span>(xhr.status === <span class=\"number\">400</span>)&#123;</span><br><span class=\"line\">                  alert(xhr.responseText)</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure></li>\n<li>404错误状态码 输入错误的情况较多 ,检测请求地址是否有误</li>\n<li>500错误代码时服务器端错误</li>\n<li>断网时无法触发onload事件，可以执行onerror()事件</li>\n</ol>\n<p><code>注意</code>ajax状态码表示的是服务器的请求过程的状态，http状态码表示的是请求的结果</p>\n<h2 id=\"低版本的缓存问题\"><a href=\"#低版本的缓存问题\" class=\"headerlink\" title=\"低版本的缓存问题\"></a>低版本的缓存问题</h2><ol>\n<li>在请求地址上加一个参数，并且保证每次请求参数的值不同即可</li>\n</ol>\n<h2 id=\"同步异步\"><a href=\"#同步异步\" class=\"headerlink\" title=\"同步异步\"></a>同步异步</h2><ol>\n<li>封装一个简单的异步函数<code>get</code></li>\n<li>get请求需要拼接到请求地址的后方，post请求放在send的方法中</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span> (<span class=\"params\">params</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> options = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    params.data.forEach(<span class=\"function\">(<span class=\"params\">v,i</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        params += v + <span class=\"string\">&#x27;=&#x27;</span> + params.data[i] + <span class=\"string\">&#x27;&amp;&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    params.substr(<span class=\"number\">0</span>,params.length-<span class=\"number\">1</span>)</span><br><span class=\"line\">    xhr.open(</span><br><span class=\"line\">        params.type,params.url</span><br><span class=\"line\">    )</span><br><span class=\"line\">    xhr.send()</span><br><span class=\"line\">    xhr.onload = <span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">        params.success(xhr.responseText)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajax(&#123;</span><br><span class=\"line\">    type:<span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">    url:<span class=\"string\">&#x27;http://localhost:3000/first1&#x27;</span>,</span><br><span class=\"line\">    data:&#123;</span><br><span class=\"line\">        name:<span class=\"string\">&#x27;zs&#x27;</span>,</span><br><span class=\"line\">        age:<span class=\"number\">20</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    success:<span class=\"function\">(<span class=\"params\">data</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;这里是success函数&#x27;</span>+data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<ol start=\"2\">\n<li>封装get请求和post请求参数的时候</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">params</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> options = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> attr <span class=\"keyword\">in</span> params.data) &#123;</span><br><span class=\"line\">        options += attr + <span class=\"string\">&#x27;=&#x27;</span> + params.data[attr] + <span class=\"string\">&#x27;&amp;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    options = options.substr(<span class=\"number\">0</span>, options.length - <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(options)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (params.type === <span class=\"string\">&#x27;get&#x27;</span>) &#123;</span><br><span class=\"line\">        params.url = params.url + <span class=\"string\">&#x27;?&#x27;</span> + options</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.open(params.type, params.url)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (params.type == <span class=\"string\">&#x27;post&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> contentType = params.header[<span class=\"string\">&#x27;Content-Type&#x27;</span>]</span><br><span class=\"line\">        xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>, contentType)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (contentType === <span class=\"string\">&#x27;application/json&#x27;</span>) &#123;</span><br><span class=\"line\">            xhr.send(<span class=\"built_in\">JSON</span>.stringify(params.data))</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            xhr.send(options)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        xhr.send()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.onload = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 对http的状态码进行判断如果状态码为200则调用success函数，如果失败则调用error函数</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> responseHeader = xhr.getResponseHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">let</span> resText = xhr.responseText</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (responseHeader.includes(<span class=\"string\">&#x27;application/json&#x27;</span>)) &#123;</span><br><span class=\"line\">                resText = <span class=\"built_in\">JSON</span>.parse(resText)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            params.success(resText, xhr)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            params.error(resText, xhr)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajax(&#123;</span><br><span class=\"line\">    type: <span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">    url: <span class=\"string\">&#x27;http://localhost:3000/responseData&#x27;</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;sz&#x27;</span>,</span><br><span class=\"line\">        age: <span class=\"number\">20</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    header: &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span></span><br><span class=\"line\">        <span class=\"comment\">// &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    success: <span class=\"function\">(<span class=\"params\">data,xhr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;这里是success函数&#x27;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(xhr);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    error: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;这里是error函数&#x27;</span> + data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<ol start=\"3\">\n<li>获取请求中的数据 <code>getResponseHeader()</code>方法  在页面加载完成后调用<code>onload</code>事件中 如果获取到的请求类型为<code>application/json</code>类型,将json字符串以json对象的方式输出，使用方法<code>JSON.parse()</code></li>\n<li><code>Object.assign()</code>  如果目标对象和源对象有同名属性，或者多个源对象有同名属性，则后面的属性会覆盖前面的属性。如果该函数只有一个参数，当参数为对象时，直接返回该对象；当参数不是对象时，会先将参数转为对象然后返回。并且该方法是<code>浅拷贝</code></li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">params</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 给ajax设定一个默认值</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> defaults = &#123;</span><br><span class=\"line\">        type: <span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">        url: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">        data: &#123;&#125;,</span><br><span class=\"line\">        header: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        success: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        error: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 使用Object.assign()方法 将之间的对象覆盖</span></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.assign(defaults,params)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> options = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> attr <span class=\"keyword\">in</span> params.data) &#123;</span><br><span class=\"line\">        options += attr + <span class=\"string\">&#x27;=&#x27;</span> + defaults.data[attr] + <span class=\"string\">&#x27;&amp;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    options = options.substr(<span class=\"number\">0</span>, defaults.length - <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(options)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (defaults.type === <span class=\"string\">&#x27;get&#x27;</span>) &#123;</span><br><span class=\"line\">        defaults.url = defaults.url + <span class=\"string\">&#x27;?&#x27;</span> + options</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.open(defaults.type, defaults.url)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (defaults.type == <span class=\"string\">&#x27;post&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> contentType = defaults.header[<span class=\"string\">&#x27;Content-Type&#x27;</span>]</span><br><span class=\"line\">        xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>, contentType)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (contentType === <span class=\"string\">&#x27;application/json&#x27;</span>) &#123;</span><br><span class=\"line\">            xhr.send(<span class=\"built_in\">JSON</span>.stringify(defaults.data))</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            xhr.send(options)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        xhr.send()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.onload = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 对http的状态码进行判断如果状态码为200则调用success函数，如果失败则调用error函数</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> responseHeader = xhr.getResponseHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">let</span> resText = xhr.responseText</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (responseHeader.includes(<span class=\"string\">&#x27;application/json&#x27;</span>)) &#123;</span><br><span class=\"line\">                resText = <span class=\"built_in\">JSON</span>.parse(resText)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            defaults.success(resText, xhr)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            defaults.error(resText, xhr)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajax(&#123;</span><br><span class=\"line\">    url: <span class=\"string\">&#x27;http://localhost:3000/responseData&#x27;</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;sz&#x27;</span>,</span><br><span class=\"line\">        age: <span class=\"number\">20</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    success: <span class=\"function\">(<span class=\"params\">data, xhr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;这里是success函数&#x27;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(xhr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n<h2 id=\"模板引擎\"><a href=\"#模板引擎\" class=\"headerlink\" title=\"模板引擎\"></a>模板引擎</h2><ol>\n<li>使用模板引擎 <code>art-template</code> 在客户端的使用步骤</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板引擎<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/js/art-template.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/html&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;idt&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">username</span>&#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">age</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> html = template(<span class=\"string\">&#x27;idt&#x27;</span>,&#123;<span class=\"attr\">username</span>:<span class=\"string\">&#x27;zs&#x27;</span>,<span class=\"attr\">age</span>:<span class=\"number\">20</span>&#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.container&#x27;</span>).innerHTML = html</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"验证邮箱\"><a href=\"#验证邮箱\" class=\"headerlink\" title=\"验证邮箱\"></a>验证邮箱</h2><details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>验证邮箱地址<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/js/ajax.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- &lt;script src=&quot;/js/template.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">        body &#123;</span><br><span class=\"line\">            background: -webkit-linear-gradient(left, rgb(216, 236, 235), rgb(241, 229, 241));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.box</span> &#123;</span></span><br><span class=\"line\">            margin: 200px auto;</span><br><span class=\"line\">            display: flex;</span><br><span class=\"line\">            justify-content: center;</span><br><span class=\"line\">            align-items: center;</span><br><span class=\"line\">            flex-direction: column;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.email_login</span> &#123;</span></span><br><span class=\"line\">            border-radius: 10px;</span><br><span class=\"line\">            width: 400px;</span><br><span class=\"line\">            height: 30px;</span><br><span class=\"line\">            padding: 10px;</span><br><span class=\"line\"><span class=\"css\">            <span class=\"comment\">/* outline-color: aliceblue; */</span></span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.email_login</span><span class=\"selector-pseudo\">:hover</span> &#123;</span></span><br><span class=\"line\">            outline-color: bisque;</span><br><span class=\"line\">            border: none;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.message</span> &#123;</span></span><br><span class=\"line\">            background: rgb(221, 208, 208);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.success</span> &#123;</span></span><br><span class=\"line\">            background-color: rgb(82, 82, 173);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.error</span> &#123;</span></span><br><span class=\"line\">            background-color: rgb(226, 106, 106);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;email_login&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;请在此输入您要初测的邮箱账号！！&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;message&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 获取元素</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> email = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.email_login&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> message = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;p&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 当输入框失去焦点时的事件</span></span></span><br><span class=\"line\"><span class=\"javascript\">        email.onblur = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// console.log(e);</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 获取用户输入的值，对用户输入的值判断</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> email_value = <span class=\"built_in\">this</span>.value</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 正则判断输入的值</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> reg = <span class=\"regexp\">/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (!reg.test(email_value)) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                message.innerHTML = <span class=\"string\">&#x27;输入的邮箱规则格式有误，请重新输入！！！&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">                message.className = <span class=\"string\">&#x27;message&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">return</span>;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ajax(&#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"string\">&#x27;post&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                url: <span class=\"string\">&quot;http://localhost:3000/emailbox&quot;</span>,</span></span><br><span class=\"line\">                data: &#123;</span><br><span class=\"line\">                    email: email_value</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\"><span class=\"javascript\">                success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">response</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"keyword\">if</span> (response.message.includes(<span class=\"string\">&#x27;恭喜&#x27;</span>)) &#123;</span></span><br><span class=\"line\">                        message.innerHTML = response.message</span><br><span class=\"line\"><span class=\"javascript\">                        message.className = <span class=\"string\">&#x27;success&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\">                        message.innerHTML = response.message</span><br><span class=\"line\"><span class=\"javascript\">                        message.className = <span class=\"string\">&#x27;error&#x27;</span></span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\"><span class=\"javascript\">                error: <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\">                    message.innerHTML = res.message</span><br><span class=\"line\"><span class=\"javascript\">                    message.className = <span class=\"string\">&#x27;error&#x27;</span></span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<details green><summary> <p>请求路由</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.get(<span class=\"string\">&#x27;/emailbox&#x27;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(req.query.email == <span class=\"string\">&#x27;iui9@qq.com&#x27;</span>)&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;您好邮箱已注册，请您重新输入！！&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;恭喜您注册的邮箱可用！！！！&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/emailbox&#x27;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(req.body.email == <span class=\"string\">&#x27;iui9@qq.com&#x27;</span>)&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;您好邮箱已注册，请您重新输入！！&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;恭喜您注册的邮箱可用！！！！&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<details green><summary> <p>ajax封装</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">params</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 给ajax设定一个默认值</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> defaults = &#123;</span><br><span class=\"line\">        type: <span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">        url: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">        data: &#123;&#125;,</span><br><span class=\"line\">        header: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        success: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;&#125;,</span><br><span class=\"line\">        error: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 使用Object.assign()方法 将之间的对象覆盖</span></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.assign(defaults,params)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> options = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> attr <span class=\"keyword\">in</span> params.data) &#123;</span><br><span class=\"line\">        options += attr + <span class=\"string\">&#x27;=&#x27;</span> + defaults.data[attr] + <span class=\"string\">&#x27;&amp;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    options = options.substr(<span class=\"number\">0</span>, defaults.length - <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(options)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (defaults.type === <span class=\"string\">&#x27;get&#x27;</span>) &#123;</span><br><span class=\"line\">        defaults.url = defaults.url + <span class=\"string\">&#x27;?&#x27;</span> + options</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.open(defaults.type, defaults.url)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (defaults.type == <span class=\"string\">&#x27;post&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> contentType = defaults.header[<span class=\"string\">&#x27;Content-Type&#x27;</span>]</span><br><span class=\"line\">        xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>, contentType)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (contentType === <span class=\"string\">&#x27;application/json&#x27;</span>) &#123;</span><br><span class=\"line\">            xhr.send(<span class=\"built_in\">JSON</span>.stringify(defaults.data))</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            xhr.send(options)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        xhr.send()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.onload = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 对http的状态码进行判断如果状态码为200则调用success函数，如果失败则调用error函数</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> responseHeader = xhr.getResponseHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">let</span> resText = xhr.responseText</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (responseHeader.includes(<span class=\"string\">&#x27;application/json&#x27;</span>)) &#123;</span><br><span class=\"line\">                resText = <span class=\"built_in\">JSON</span>.parse(resText)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            defaults.success(resText, xhr)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            defaults.error(resText, xhr)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"搜索框内容自动提示\"><a href=\"#搜索框内容自动提示\" class=\"headerlink\" title=\"搜索框内容自动提示\"></a>搜索框内容自动提示</h2><ol>\n<li>使用定时器的操作，延时对请求接口发送ajax请求，在每次请求之前将之前的定时器清除</li>\n<li>设置防抖操作，对用户输入的值进行判断如果用户没有在手术框中输入内容，将提示信息  使用trim()函数，将文本框中的空格清除 阻止程序向下执行 <code>return</code></li>\n</ol>\n<h2 id=\"三级联动（省市区）\"><a href=\"#三级联动（省市区）\" class=\"headerlink\" title=\"三级联动（省市区）\"></a>三级联动（省市区）</h2><ol>\n<li>接口地址：<a href=\"https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/4/province1.json\">接口地址</a></li>\n<li>JSON.stringify() 方法可以将对象的数据存储在本地的内存中</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>三级联动 省市区<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/ajax.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/art-template.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    body &#123;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ccc</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.box</span> &#123;</span></span><br><span class=\"line\">        margin: 100px auto;</span><br><span class=\"line\">        width: 500px;</span><br><span class=\"line\">        height: 300px;</span><br><span class=\"line\">        display: flex;</span><br><span class=\"line\">        justify-content: center;</span><br><span class=\"line\">        align-items: center;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form_group&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;province&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- &lt;option value=&quot;&quot;&gt;请选择省份&lt;/option&gt; --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form_group&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;city&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>请选择城市<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form_group&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;area&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>请选择县城<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/html&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;provinceTpl&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>请选择省份<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    </span><span class=\"template-variable\">&#123;&#123;<span class=\"name\"><span class=\"builtin-name\">each</span></span> provices_list&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;</span></span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.pindex</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">&quot;</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.provices_list</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    </span><span class=\"template-tag\">&#123;&#123;/<span class=\"name\"><span class=\"builtin-name\">each</span></span>&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/html&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;cityTpl&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>请选择城市<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    </span><span class=\"template-variable\">&#123;&#123;<span class=\"name\"><span class=\"builtin-name\">each</span></span> city_lists&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.citysName</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    </span><span class=\"template-tag\">&#123;&#123;/<span class=\"name\"><span class=\"builtin-name\">each</span></span>&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 封装一个函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> All_lists = []</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getaddressData</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">        ajax(&#123;</span><br><span class=\"line\"><span class=\"javascript\">            type: <span class=\"string\">&quot;get&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            url: <span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/4/province1.json&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">response</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(response);</span></span><br><span class=\"line\">                All_lists = response.provinces</span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&#x27;address_data&#x27;</span>, <span class=\"built_in\">JSON</span>.stringify(response.provinces))</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> province = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#province&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> city = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#city&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> addressData = <span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&#x27;address_data&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span> (!addressData) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">this</span>.getaddressData()</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        All_lists = <span class=\"built_in\">JSON</span>.parse(addressData)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> provices_list = All_lists.map(<span class=\"function\">(<span class=\"params\">v,i</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> arr = &#123;<span class=\"attr\">provices_list</span>:v.provinceName,<span class=\"attr\">pindex</span>:i&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> arr</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// console.log(provices_list);</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> html = template(<span class=\"string\">&#x27;provinceTpl&#x27;</span>,&#123;provices_list&#125;)</span></span><br><span class=\"line\">        province.innerHTML = html</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 给省份选择框添加一个改变事件监听 select的变化</span></span></span><br><span class=\"line\"><span class=\"javascript\">    province.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> id = <span class=\"built_in\">this</span>.value</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> city_lists = <span class=\"built_in\">JSON</span>.parse(addressData)[<span class=\"built_in\">Number</span>(id)].citys</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// console.log(city_lists);</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> html1 = template(<span class=\"string\">&#x27;cityTpl&#x27;</span>,&#123;city_lists&#125;)</span></span><br><span class=\"line\">        city.innerHTML = html1</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"FormData对象的作用\"><a href=\"#FormData对象的作用\" class=\"headerlink\" title=\"FormData对象的作用\"></a>FormData对象的作用</h2><ol>\n<li>模拟HTML表单</li>\n<li>异步上传二进制文件</li>\n<li>本身是一个构造函数</li>\n<li>使用formidable模块来解析FormData对象</li>\n<li>formData.get(‘属性名’)，formData.set(‘属性名’,’属性值’)，formData.delete(‘key’),formData.append(‘key’,’value’)</li>\n<li>默认接收最后一个实例方法</li>\n<li>set方法和append方法的区别：在属性名已经存在的情况下，set会覆盖原来的键名的值，append会保留两个值</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>FormData对象<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;form&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 获取按钮</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> btn = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#form&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    btn.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 将普通的html表单转换为表单对象</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData(form)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.open(<span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/formData&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 发送ajax请求</span></span></span><br><span class=\"line\">        xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 监听xhr对象下面的onload事件</span></span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span>(xhr.status==<span class=\"number\">200</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<details green><summary> <p>配置路由</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 加入formidable模板</span></span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/formData&#x27;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">    form.parse(req,<span class=\"function\">(<span class=\"params\">err,fields,files</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        res.send(fields)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n<h2 id=\"formData二进制上传\"><a href=\"#formData二进制上传\" class=\"headerlink\" title=\"formData二进制上传\"></a>formData二进制上传</h2><ol>\n<li>get请求方式不能用于文件的上传</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>FormData二进制文件的上传<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;file&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;file&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> file = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        file.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData()</span></span><br><span class=\"line\"><span class=\"javascript\">            formData.append(<span class=\"string\">&#x27;attrName&#x27;</span>,<span class=\"built_in\">this</span>.files[<span class=\"number\">0</span>])</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/up_file&#x27;</span>)</span></span><br><span class=\"line\">            xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">if</span>(xhr.status==<span class=\"number\">200</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"上传进度条\"><a href=\"#上传进度条\" class=\"headerlink\" title=\"上传进度条\"></a>上传进度条</h2><ol>\n<li>使用上传事件中的<code>onprogress</code>事件</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>上传进度条<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.progress_warp</span>&#123;</span></span><br><span class=\"line\">        width: 800px;</span><br><span class=\"line\">        height: 40px;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ccc</span>;</span></span><br><span class=\"line\">        border-radius: 5px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.progress_event</span>&#123;</span></span><br><span class=\"line\">        border-radius: 5px;</span><br><span class=\"line\">        width: 0;</span><br><span class=\"line\">        height: 100%;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#fff</span>;</span></span><br><span class=\"line\">        background-color: rgb(53, 27, 68);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;file&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;file&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;progress_warp&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;progress_event&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 0%;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;bar&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> file = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> bar = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#bar&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        file.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData()</span></span><br><span class=\"line\"><span class=\"javascript\">            formData.append(<span class=\"string\">&#x27;attrName&#x27;</span>,<span class=\"built_in\">this</span>.files[<span class=\"number\">0</span>])</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/up_file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.upload.onprogress = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"comment\">// console.log(e);</span></span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">let</span> bar_data = (e.loaded / e.total).toFixed(<span class=\"number\">2</span>) * <span class=\"number\">100</span> + <span class=\"string\">&#x27;%&#x27;</span></span></span><br><span class=\"line\">                bar.style.width = bar_data</span><br><span class=\"line\">                bar.innerHTML = bar_data</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">if</span>(xhr.status==<span class=\"number\">200</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"图片加载预览\"><a href=\"#图片加载预览\" class=\"headerlink\" title=\"图片加载预览\"></a>图片加载预览</h2><details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>上传进度条<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.progress_warp</span>&#123;</span></span><br><span class=\"line\">        width: 800px;</span><br><span class=\"line\">        height: 40px;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ccc</span>;</span></span><br><span class=\"line\">        border-radius: 5px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.box_img</span>&#123;</span></span><br><span class=\"line\">        padding: 20px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.box_img</span> <span class=\"selector-tag\">img</span>&#123;</span></span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        border-radius: 10px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.progress_event</span>&#123;</span></span><br><span class=\"line\">        border-radius: 5px;</span><br><span class=\"line\">        width: 0;</span><br><span class=\"line\">        display: flex;</span><br><span class=\"line\">        justify-content: center;</span><br><span class=\"line\">        align-items: center;</span><br><span class=\"line\">        font-size: 20px;</span><br><span class=\"line\">        font-weight: 550;</span><br><span class=\"line\">        margin: 10px 0;</span><br><span class=\"line\">        height: 100%;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#fff</span>;</span></span><br><span class=\"line\">        background-color: rgb(53, 27, 68);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;file&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;file&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box_img&quot;</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;progress_warp&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;progress_event&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 0%;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;bar&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> file = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> bar = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#bar&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> box_img = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box_img&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        file.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData()</span></span><br><span class=\"line\"><span class=\"javascript\">            formData.append(<span class=\"string\">&#x27;attrName&#x27;</span>,<span class=\"built_in\">this</span>.files[<span class=\"number\">0</span>])</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/up_file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.upload.onprogress = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"comment\">// console.log(e);</span></span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">let</span> bar_data = (e.loaded / e.total).toFixed(<span class=\"number\">2</span>) * <span class=\"number\">100</span> + <span class=\"string\">&#x27;%&#x27;</span></span></span><br><span class=\"line\">                bar.style.width = bar_data</span><br><span class=\"line\">                bar.innerHTML = bar_data</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">if</span>(xhr.status==<span class=\"number\">200</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// console.log(xhr.responseText);</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// 动态创建一个图片 将上传的文件的路径名称赋值给uploads</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"keyword\">let</span> img = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;img&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">                    img.src= <span class=\"string\">&#x27;/uploads&#x27;</span> + <span class=\"built_in\">JSON</span>.parse(xhr.responseText).path</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// 调用图片上传成功的事件onload</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    img.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\">                        box_img.appendChild(img)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"ajax问题\"><a href=\"#ajax问题\" class=\"headerlink\" title=\"ajax问题\"></a>ajax问题</h2><ol>\n<li>ajax不能向非同源服务器端发送请求</li>\n<li>使用jsonp解决同源限制问题   </li>\n</ol>\n<ul>\n<li>将不同源的服务器请求地址写在script标签的src属性中</li>\n<li>服务端响应数据必须是以一个函数的调用</li>\n<li>在客户端全局作用域下定义函数fn（在script标签的上面）</li>\n<li>在函数内部对服务器端返回的数据进处理</li>\n</ul>\n<h2 id=\"post请求格式\"><a href=\"#post请求格式\" class=\"headerlink\" title=\"post请求格式\"></a>post请求格式</h2><ol>\n<li>必须有请求头：content-type:application/x-www-form-unlencoded<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>post请求的两种方式<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 第一种使用url形式的请求方式 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- &lt;script type=&quot;text/javascript&quot;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        let xhr = new XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"comment\">        xhr.open(&#x27;post&#x27;, &#x27;http://localhost:3000/post&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\">        xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\">        params = &quot;name=zs&amp;age=12&quot;</span></span><br><span class=\"line\"><span class=\"comment\">        xhr.send(params)</span></span><br><span class=\"line\"><span class=\"comment\">        xhr.onload = function () &#123;</span></span><br><span class=\"line\"><span class=\"comment\">            console.log(xhr.responseText);</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;/script&gt; --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 第二种使用json形式 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.open(<span class=\"string\">&#x27;post&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/post&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>, <span class=\"string\">&#x27;application/json&#x27;</span>)</span></span><br><span class=\"line\">        params = &#123;</span><br><span class=\"line\"><span class=\"javascript\">            name: <span class=\"string\">&#x27;zs&#x27;</span>,</span></span><br><span class=\"line\">            age: 2</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        xhr.send(<span class=\"built_in\">JSON</span>.stringify(params))</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n</li>\n</ol>\n<h2 id=\"jsonp请求封装\"><a href=\"#jsonp请求封装\" class=\"headerlink\" title=\"jsonp请求封装\"></a>jsonp请求封装</h2><details red><summary> <p>查看客户端</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>jsonp的调用<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn1&quot;</span>&gt;</span>jsonP提交<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn2&quot;</span>&gt;</span>jsonP提交<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> btn1 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;btn1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> btn2 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;btn2&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        btn2.onclick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">            jsonP(&#123;</span><br><span class=\"line\"><span class=\"javascript\">                url: <span class=\"string\">&#x27;http://localhost:3000/better&#x27;</span>,</span></span><br><span class=\"line\">                data:&#123;</span><br><span class=\"line\"><span class=\"javascript\">                    name:<span class=\"string\">&#x27;zs&#x27;</span>,</span></span><br><span class=\"line\">                    age:23</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\"><span class=\"javascript\">                success: <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(e)</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(<span class=\"number\">123</span>)</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 封装一个jsonP函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">jsonP</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> script = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;script&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 将传递的data取出来</span></span></span><br><span class=\"line\"><span class=\"javascript\">            params = <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> arr <span class=\"keyword\">in</span> e.data)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                params+=<span class=\"string\">`&amp;<span class=\"subst\">$&#123;arr&#125;</span>=<span class=\"subst\">$&#123;e.data[arr]&#125;</span>`</span></span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 设置window下的随机函数名</span></span></span><br><span class=\"line\"><span class=\"javascript\">            fName = <span class=\"string\">&#x27;myjson&#x27;</span> + <span class=\"built_in\">Math</span>.random().toString().replace(<span class=\"string\">&#x27;.&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 设置src中的请求地址</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">window</span>[fName] = e.success</span></span><br><span class=\"line\"><span class=\"javascript\">            script.src = e.url + <span class=\"string\">`?callback=<span class=\"subst\">$&#123;fName+params&#125;</span>`</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">document</span>.body.appendChild(script)</span></span><br><span class=\"line\"><span class=\"javascript\">            script.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">document</span>.body.removeChild(script)</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n<details red><summary> <p>查看服务器</p> </summary>\n              <div class='content'>\n              <p>}</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.get(<span class=\"string\">&#x27;/better&#x27;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// const fName = req.query.callback</span></span><br><span class=\"line\">    <span class=\"comment\">// const result = fName + &#x27;(&#123;name:&quot;zs&quot;&#125;)&#x27;</span></span><br><span class=\"line\">    <span class=\"comment\">// res.send(result)</span></span><br><span class=\"line\">    res.jsonp(&#123;<span class=\"attr\">name</span>:<span class=\"string\">&#x27;zs&#x27;</span>,<span class=\"attr\">age</span>:<span class=\"number\">98</span>&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"腾讯天气API\"><a href=\"#腾讯天气API\" class=\"headerlink\" title=\"腾讯天气API\"></a>腾讯天气API</h2><details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@v0.47/js/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@frame/frame/bootstrap/3/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@frame/frame/bootstrap/3/js/bootstrap.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/js/art-template.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.ta</span>&#123;</span></span><br><span class=\"line\">        margin: 100px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    th&#123;</span><br><span class=\"line\">        text-align: center;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ta table-responsive&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;table table-striped table-bordered table-hover text-center&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>degree<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>update_time<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>weather<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>weather_code<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>weather_short<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>wind_direction<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>wind_power<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">tbody</span> <span class=\"attr\">id</span>=<span class=\"string\">&#x27;html&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/js/jsonp.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/html&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;tpl&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        </span><span class=\"template-variable\">&#123;&#123;<span class=\"name\"><span class=\"builtin-name\">each</span></span> info&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.degree</span> + <span class=\"string\">&#x27;°&#x27;</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">dateFormat</span>(<span class=\"name\">$value.update_time</span>)&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.weather</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.weather_code</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.weather_short</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.wind_direction</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.wind_power</span>+<span class=\"string\">&#x27;级&#x27;</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        </span><span class=\"template-tag\">&#123;&#123;/<span class=\"name\"><span class=\"builtin-name\">each</span></span>&#125;&#125;</span></span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> datas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;html&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 构造一个date函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dateFormat</span>(<span class=\"params\">dates</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> year = dates.substr(<span class=\"number\">0</span>,<span class=\"number\">4</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> mounth = dates.substr(<span class=\"number\">4</span>,<span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> day = dates.substr(<span class=\"number\">6</span>,<span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> hour = dates.substr(<span class=\"number\">8</span>,<span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> min = dates.substr(<span class=\"number\">10</span>,<span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;year&#125;</span>-<span class=\"subst\">$&#123;mounth&#125;</span>-<span class=\"subst\">$&#123;day&#125;</span> <span class=\"subst\">$&#123;hour&#125;</span>:<span class=\"subst\">$&#123;min&#125;</span>`</span></span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 将自定义函数开放到模板中</span></span></span><br><span class=\"line\">        template.defaults.imports.dateFormat = dateFormat</span><br><span class=\"line\">        jsonP(&#123;</span><br><span class=\"line\"><span class=\"javascript\">            url: <span class=\"string\">&#x27;https://wis.qq.com/weather/common&#x27;</span>,</span></span><br><span class=\"line\">            data: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                source: <span class=\"string\">&#x27;pc&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                weather_type: <span class=\"string\">&#x27;forecast_1h|forecast_24h&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                province: <span class=\"string\">&#x27;山西省&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                city: <span class=\"string\">&#x27;晋中市&#x27;</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"><span class=\"javascript\">            success: <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"comment\">// console.log(e);</span></span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">let</span> html = template(<span class=\"string\">&#x27;tpl&#x27;</span>, &#123; <span class=\"attr\">info</span>: e.data.forecast_1h &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"comment\">// console.log(html);</span></span></span><br><span class=\"line\">                datas.innerHTML = html</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"cors-跨域资源共享\"><a href=\"#cors-跨域资源共享\" class=\"headerlink\" title=\"cors 跨域资源共享\"></a>cors 跨域资源共享</h2><ol>\n<li>使用express方法 设置请求的报文</li>\n<li>使用express模块中的中间件拦截请求  app.use</li>\n<li>设置服务器的响应报文  <code>res.header(&#39;Access-Control-Allow-Origin&#39;,&#39;*&#39;)</code></li>\n<li>设置请求方法 <code>res.header(&#39;Access-Control-Allow-Method&#39;:&#39;get,post&#39;)</code></li>\n<li>注意在使用中间件拦截时  一定要注意放行，否则无法执行后面的内容 <code>next()</code></li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <p>}</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.use(<span class=\"function\">(<span class=\"params\">req,res,next</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    res.header(<span class=\"string\">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class=\"string\">&#x27;*&#x27;</span>)</span><br><span class=\"line\">    res.header(<span class=\"string\">&#x27;Access-Control-Allow-Methods&#x27;</span>,<span class=\"string\">&#x27;get,post&#x27;</span>)</span><br><span class=\"line\">    next()</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"cookie复习\"><a href=\"#cookie复习\" class=\"headerlink\" title=\"cookie复习\"></a>cookie复习</h2><ol>\n<li><code>withCredentials</code>：指定在涉及到跨域请求时，是否携带cookie信息，默认值为false</li>\n<li><code>Access-Control-Allow-Credentials</code>:true 允许客户端发送请求时携带cookie</li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>设置cook信息<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;loginForm&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;用户名&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;密码&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;pwd&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;logined&quot;</span>&gt;</span>登录<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;checklogin&quot;</span>&gt;</span>检测登录<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> loginform = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;loginForm&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> logined = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;logined&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> checklogin = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;checklogin&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 监听请求</span></span></span><br><span class=\"line\"><span class=\"javascript\">        logined.onclick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData(loginform)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;post&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/logins&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.withCredentials = <span class=\"literal\">true</span></span></span><br><span class=\"line\">            xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        checklogin.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;get&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/checklogin&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// xhr.withCredentials = true</span></span></span><br><span class=\"line\">            xhr.send()</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.post(<span class=\"string\">&#x27;/logins&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(res);</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">    form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(fields);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (fields.username == <span class=\"string\">&#x27;123&#x27;</span> &amp;&amp; fields.pwd == <span class=\"string\">&#x27;123&#x27;</span>) &#123;</span><br><span class=\"line\">            req.session.isLogin = <span class=\"literal\">true</span></span><br><span class=\"line\">            res.send(&#123; <span class=\"attr\">message</span>: <span class=\"string\">&#x27;登录成功&#x27;</span>, <span class=\"attr\">code</span>: <span class=\"number\">1</span> &#125;)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.send(&#123; <span class=\"attr\">message</span>: <span class=\"string\">&#x27;登录失败&#x27;</span>, <span class=\"attr\">code</span>: -<span class=\"number\">1</span> &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// res.send(fields)</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 解析formdata</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/checklogin&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.session.isLogin) &#123;</span><br><span class=\"line\">        res.send(&#123; <span class=\"attr\">message</span>: <span class=\"string\">&#x27;当前已登录&#x27;</span> &#125;)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;当前未登录&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"jquery中的-ajax\"><a href=\"#jquery中的-ajax\" class=\"headerlink\" title=\"jquery中的$.ajax()\"></a>jquery中的$.ajax()</h2><ol>\n<li>请求参数时，默认为application/x-www-form-encoded</li>\n<li>如果使用json对象，需要将json对象转换成json字符串，并且将类型设置为application/json</li>\n<li><code>beforeSend</code> 表示在发送ajax请求前执行的 可在其中测试传递的参数，不满足条件可以使用<code>return false</code></li>\n</ol>\n<h3 id=\"seralize方法\"><a href=\"#seralize方法\" class=\"headerlink\" title=\"seralize方法\"></a>seralize方法</h3><ol>\n<li>将表单中的数据自动拼接成字符串类型，如：<code>name=zs&amp;age=12</code></li>\n<li>使用<code>sealizeArray()</code>方法将用户输入的内容转换成数组形式</li>\n<li>封装一个函数使数组形式转换为json对象</li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>使用jquery中的serialize方法<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;form&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;用户名&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;pwd&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;用户名&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@v0.47/js/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">&#x27;#form&#x27;</span>).on(<span class=\"string\">&#x27;submit&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//    let params =  $(&quot;#form&quot;).serialize()</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//    console.log(params);</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//    return false;</span></span></span><br><span class=\"line\"><span class=\"javascript\">            serializeObject($(<span class=\"built_in\">this</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">serializeObject</span>(<span class=\"params\">obj</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> result = &#123;&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> params = obj.serializeArray()</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// console.log(params)</span></span></span><br><span class=\"line\"><span class=\"javascript\">            $.each(params,<span class=\"function\">(<span class=\"params\">index,item</span>)=&gt;</span>&#123;</span></span><br><span class=\"line\">                result[item.name] = item.value</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">console</span>.log(result);</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> result</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"ajax-发送jsonp请求\"><a href=\"#ajax-发送jsonp请求\" class=\"headerlink\" title=\"$.ajax() 发送jsonp请求\"></a>$.ajax() 发送jsonp请求</h2><ol>\n<li><code>dataType:&#39;jsonp&#39;</code>   </li>\n<li><code>jsonCallback:&#39;fnName&#39;</code>  指定函数名称</li>\n<li><code>jsonp:&#39;cb&#39;</code>  修改callback名称</li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>使用jquery中的jsonp方法<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@v0.47/js/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span></span><br><span class=\"line\">        发送请求</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// $(&#x27;#btn&#x27;).on(&#x27;click&#x27;,function()&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     $.ajax(&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//         type:&#x27;get&#x27;,</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//         url:&#x27;jsonp&#x27;,</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//         success:(res)=&gt;&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//             console.log(res);</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//         &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     &#125;)</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// &#125;)</span></span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">&#x27;#btn&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            $.ajax(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                url:<span class=\"string\">&quot;/jsonp&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                type:<span class=\"string\">&#x27;get&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                dataType:<span class=\"string\">&#x27;jsonp&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                success:<span class=\"function\">(<span class=\"params\">res</span>)=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(res);</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"todoList-案例\"><a href=\"#todoList-案例\" class=\"headerlink\" title=\"todoList 案例\"></a>todoList 案例</h2><ol>\n<li>GitHub地址：【<a href=\"https://github.com/Rr210/node-js\">github</a>】</li>\n<li>使用技术<code>node.js+express+mongoose</code></li>\n</ol>\n<h2 id=\"ajax请求\"><a href=\"#ajax请求\" class=\"headerlink\" title=\"ajax请求\"></a>ajax请求</h2><ol>\n<li>ajaxStart方法为当页面中有ajax请求时触发</li>\n<li>ajaxComplete 方法为当页面中ajax请求完成时触发</li>\n</ol>\n<h2 id=\"RESful风格\"><a href=\"#RESful风格\" class=\"headerlink\" title=\"RESful风格\"></a>RESful风格</h2><ol>\n<li>规范API设计</li>\n<li><code>get/put/delete/</code></li>\n<li><code>req.params</code> 获取get请求参数  地址为：<code>user/:id</code></li>\n</ol>\n<h2 id=\"XML是可扩展标记语言\"><a href=\"#XML是可扩展标记语言\" class=\"headerlink\" title=\"XML是可扩展标记语言\"></a>XML是可扩展标记语言</h2><ol>\n<li>作用是传输和存储数据</li>\n<li>XML DOM 即XML文档对象模型</li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>XML的获取<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>发送请求<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> btn = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> container = <span class=\"built_in\">document</span>.getElementsByClassName(<span class=\"string\">&#x27;container&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    btn.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.open(<span class=\"string\">&#x27;get&#x27;</span>,<span class=\"string\">&#x27;https://u.mr90.top/other/atom.xml&#x27;</span>)</span></span><br><span class=\"line\">        xhr.send()</span><br><span class=\"line\"><span class=\"javascript\">        xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> xmlDocument = xhr.responseXML</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> title = xmlDocument.querySelectorAll(<span class=\"string\">&#x27;entry title&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 使用map函数将原来数组中的元素提取出来 组成新的数组</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> arr = [...title]</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> title_all = arr.map(<span class=\"function\"><span class=\"params\">v</span>=&gt;</span>v.innerHTML)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> html = template(<span class=\"string\">&#x27;tit&#x27;</span>,&#123;title_all&#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 将获取的html数组通过模板方法渲染到页面上</span></span></span><br><span class=\"line\">            container.innerHTML = html</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"数组转换\"><a href=\"#数组转换\" class=\"headerlink\" title=\"数组转换\"></a>数组转换</h2><ol>\n<li>使用<code>Array.prototype.slice.call(nodes,0)</code> nodes为伪数组</li>\n<li>使用es6中的方法  <code>[...arr]</code> 或者使用<code>Array.from(obj)</code>的方法进行转换</li>\n</ol>\n","more":"<h2 id=\"Ajax运行原理\"><a href=\"#Ajax运行原理\" class=\"headerlink\" title=\"Ajax运行原理\"></a>Ajax运行原理</h2><blockquote>\n<p>Ajax相当于浏览器发送请求与接受响应的代理人,以实现不影响用户浏览页面的情况下，局部更新页面数据，从而提高用户体验</p>\n</blockquote>\n<h2 id=\"实现步骤\"><a href=\"#实现步骤\" class=\"headerlink\" title=\"实现步骤\"></a>实现步骤</h2><ol>\n<li>创建Ajax对象  <code>new XMLHttpRequest()</code></li>\n<li>告诉Ajax请求地址以及请求方式 <code> open</code></li>\n<li>发送请求<code> send</code>方法</li>\n<li>获取服务器端给予客户端的响应数据 onload   获取响应数据<code> responseText</code></li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1. 创建ajax对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\"><span class=\"comment\">// 2. 告诉ajax对象发送的位置，和方式,第一个参数是请求方式，第二个请求地址</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">&#x27;get&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/first&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 3. 发送请求</span></span><br><span class=\"line\">xhr.send()</span><br><span class=\"line\"><span class=\"comment\">// 4. 获取响应数据</span></span><br><span class=\"line\">xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(xhr.responseText);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"响应的数据格式\"><a href=\"#响应的数据格式\" class=\"headerlink\" title=\"响应的数据格式\"></a>响应的数据格式</h2><ol>\n<li>json对象作为响应数据的格式，请求返回的数据为json字符串</li>\n<li>将json字符串转化为json对象</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1. 创建ajax对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\"><span class=\"comment\">// 2. 告诉ajax对象发送的位置，和方式,第一个参数是请求方式，第二个请求地址</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">&#x27;get&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/responseData&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 3. 发送请求</span></span><br><span class=\"line\">xhr.send()</span><br><span class=\"line\"><span class=\"comment\">// 4. 获取响应数据，接受完请求后onload事件自动响应</span></span><br><span class=\"line\">xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"><span class=\"comment\">// 返回的是字符串类型</span></span><br><span class=\"line\"><span class=\"comment\">// console.log(xhr.responseText);</span></span><br><span class=\"line\"><span class=\"comment\">// 将json字符串转换为json对象</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> respnseText = <span class=\"built_in\">JSON</span>.parse(xhr.responseText)</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(respnseText);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">typeof</span> respnseText);</span><br><span class=\"line\"><span class=\"comment\">// 将转换的json对象中的信息获取，并且将数据信息渲染到页面中</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"string\">`&lt;h2&gt;<span class=\"subst\">$&#123;respnseText.name&#125;</span>&lt;/h2&gt;`</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.innerHTML = str</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"请求参数传递\"><a href=\"#请求参数传递\" class=\"headerlink\" title=\"请求参数传递\"></a>请求参数传递</h2><ol>\n<li>get请求<code>xx.open(&#39;get&#39;,url)</code></li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">        <span class=\"keyword\">let</span> username =<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#username&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">let</span> email =<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#email&#x27;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">let</span> submit =<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#submit&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 给按钮添加一个点击事件</span></span><br><span class=\"line\">        submit.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 获取从用户在表单中输入的值</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> emaildata = email.value</span><br><span class=\"line\">            <span class=\"keyword\">let</span> usernamedata = username.value</span><br><span class=\"line\">            <span class=\"comment\">// 对获取到数据进行字符串的拼接</span></span><br><span class=\"line\">            <span class=\"keyword\">let</span> str = <span class=\"string\">`username=<span class=\"subst\">$&#123;usernamedata&#125;</span>&amp;email=<span class=\"subst\">$&#123;emaildata&#125;</span>`</span></span><br><span class=\"line\">            <span class=\"comment\">// 创建一个ajax对象</span></span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(str);</span><br><span class=\"line\">            <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\">            <span class=\"comment\">// 创建ajax对象的请求方式</span></span><br><span class=\"line\">            xhr.open(<span class=\"string\">&#x27;get&#x27;</span>,<span class=\"string\">`http://localhost:3000/get?<span class=\"subst\">$&#123;str&#125;</span>`</span>)</span><br><span class=\"line\">            xhr.send()</span><br><span class=\"line\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(xhr.responseText);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"comment\">// res.send(req.query)</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<ol start=\"2\">\n<li>get请求只能的请求头类型只能是<code>application/x-www-form-urlencoded</code>,并且在解析请求地址时通过 body-parser中的urlencoded()方法进行解析,get请求不能提交对象数据格式的</li>\n</ol>\n<h2 id=\"post请求方式\"><a href=\"#post请求方式\" class=\"headerlink\" title=\"post请求方式\"></a>post请求方式</h2><ol>\n<li>请求的方式为json时，如果要得到请求的json内容 需要使用 body-parser中的bodyPaser.json()方法</li>\n</ol>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1. 创建ajax对象</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\"><span class=\"comment\">// 2. 告诉ajax对象发送的位置，和方式,第一个参数是请求方式，第二个请求地址</span></span><br><span class=\"line\">xhr.open(<span class=\"string\">&#x27;post&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/json&#x27;</span>)</span><br><span class=\"line\">xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>,<span class=\"string\">&#x27;application/json&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 3. 发送请求</span></span><br><span class=\"line\">xhr.send(<span class=\"built_in\">JSON</span>.stringify(&#123;<span class=\"attr\">name</span>:<span class=\"string\">&#x27;list&#x27;</span>,<span class=\"attr\">age</span>:<span class=\"number\">50</span>&#125;))</span><br><span class=\"line\"><span class=\"comment\">// 4. 获取响应数据，接受完请求后onload事件自动响应</span></span><br><span class=\"line\">xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 返回的是字符串类型</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(xhr.responseText);</span><br><span class=\"line\">    <span class=\"comment\">// 将json字符串转换为json对象</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"ajax状态码\"><a href=\"#ajax状态码\" class=\"headerlink\" title=\"ajax状态码\"></a>ajax状态码</h2><ol>\n<li>获取服务器端的响应</li>\n<li>0 请求未初始化</li>\n<li>1 请求以及简历，但是还没有发送</li>\n<li>2 请求已经发送</li>\n<li>3 表示请求正在处理中，部分代码可以使用</li>\n<li>4 响应已经完成  </li>\n<li>xhr.readyState  获取Ajax状态码  onreadystatechange事件</li>\n<li>onload比以上事件的请求方式更为效率</li>\n</ol>\n<h2 id=\"ajax错误处理\"><a href=\"#ajax错误处理\" class=\"headerlink\" title=\"ajax错误处理\"></a>ajax错误处理</h2><ol>\n<li>xhr.status获取http状态码 400<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> btn = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;btn&#x27;</span>)</span><br><span class=\"line\">      <span class=\"comment\">// 当用户点击后发送错误请求</span></span><br><span class=\"line\">      btn.onclick=<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span><br><span class=\"line\">          xhr.open(<span class=\"string\">&#x27;get&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/error&#x27;</span>)</span><br><span class=\"line\">          <span class=\"comment\">// 对请求的http的状态码进行判断</span></span><br><span class=\"line\">          xhr.send();</span><br><span class=\"line\">          xhr.onload=<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.log(xhr.status);</span><br><span class=\"line\">              <span class=\"keyword\">if</span>(xhr.status === <span class=\"number\">400</span>)&#123;</span><br><span class=\"line\">                  alert(xhr.responseText)</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;</span><br></pre></td></tr></table></figure></li>\n<li>404错误状态码 输入错误的情况较多 ,检测请求地址是否有误</li>\n<li>500错误代码时服务器端错误</li>\n<li>断网时无法触发onload事件，可以执行onerror()事件</li>\n</ol>\n<p><code>注意</code>ajax状态码表示的是服务器的请求过程的状态，http状态码表示的是请求的结果</p>\n<h2 id=\"低版本的缓存问题\"><a href=\"#低版本的缓存问题\" class=\"headerlink\" title=\"低版本的缓存问题\"></a>低版本的缓存问题</h2><ol>\n<li>在请求地址上加一个参数，并且保证每次请求参数的值不同即可</li>\n</ol>\n<h2 id=\"同步异步\"><a href=\"#同步异步\" class=\"headerlink\" title=\"同步异步\"></a>同步异步</h2><ol>\n<li>封装一个简单的异步函数<code>get</code></li>\n<li>get请求需要拼接到请求地址的后方，post请求放在send的方法中</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span> (<span class=\"params\">params</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> options = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    params.data.forEach(<span class=\"function\">(<span class=\"params\">v,i</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        params += v + <span class=\"string\">&#x27;=&#x27;</span> + params.data[i] + <span class=\"string\">&#x27;&amp;&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    params.substr(<span class=\"number\">0</span>,params.length-<span class=\"number\">1</span>)</span><br><span class=\"line\">    xhr.open(</span><br><span class=\"line\">        params.type,params.url</span><br><span class=\"line\">    )</span><br><span class=\"line\">    xhr.send()</span><br><span class=\"line\">    xhr.onload = <span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">        params.success(xhr.responseText)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajax(&#123;</span><br><span class=\"line\">    type:<span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">    url:<span class=\"string\">&#x27;http://localhost:3000/first1&#x27;</span>,</span><br><span class=\"line\">    data:&#123;</span><br><span class=\"line\">        name:<span class=\"string\">&#x27;zs&#x27;</span>,</span><br><span class=\"line\">        age:<span class=\"number\">20</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    success:<span class=\"function\">(<span class=\"params\">data</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;这里是success函数&#x27;</span>+data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<ol start=\"2\">\n<li>封装get请求和post请求参数的时候</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">params</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> options = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> attr <span class=\"keyword\">in</span> params.data) &#123;</span><br><span class=\"line\">        options += attr + <span class=\"string\">&#x27;=&#x27;</span> + params.data[attr] + <span class=\"string\">&#x27;&amp;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    options = options.substr(<span class=\"number\">0</span>, options.length - <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(options)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (params.type === <span class=\"string\">&#x27;get&#x27;</span>) &#123;</span><br><span class=\"line\">        params.url = params.url + <span class=\"string\">&#x27;?&#x27;</span> + options</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.open(params.type, params.url)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (params.type == <span class=\"string\">&#x27;post&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> contentType = params.header[<span class=\"string\">&#x27;Content-Type&#x27;</span>]</span><br><span class=\"line\">        xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>, contentType)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (contentType === <span class=\"string\">&#x27;application/json&#x27;</span>) &#123;</span><br><span class=\"line\">            xhr.send(<span class=\"built_in\">JSON</span>.stringify(params.data))</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            xhr.send(options)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        xhr.send()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.onload = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 对http的状态码进行判断如果状态码为200则调用success函数，如果失败则调用error函数</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> responseHeader = xhr.getResponseHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">let</span> resText = xhr.responseText</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (responseHeader.includes(<span class=\"string\">&#x27;application/json&#x27;</span>)) &#123;</span><br><span class=\"line\">                resText = <span class=\"built_in\">JSON</span>.parse(resText)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            params.success(resText, xhr)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            params.error(resText, xhr)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajax(&#123;</span><br><span class=\"line\">    type: <span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">    url: <span class=\"string\">&#x27;http://localhost:3000/responseData&#x27;</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;sz&#x27;</span>,</span><br><span class=\"line\">        age: <span class=\"number\">20</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    header: &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span></span><br><span class=\"line\">        <span class=\"comment\">// &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    success: <span class=\"function\">(<span class=\"params\">data,xhr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;这里是success函数&#x27;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(xhr);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    error: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;这里是error函数&#x27;</span> + data);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<ol start=\"3\">\n<li>获取请求中的数据 <code>getResponseHeader()</code>方法  在页面加载完成后调用<code>onload</code>事件中 如果获取到的请求类型为<code>application/json</code>类型,将json字符串以json对象的方式输出，使用方法<code>JSON.parse()</code></li>\n<li><code>Object.assign()</code>  如果目标对象和源对象有同名属性，或者多个源对象有同名属性，则后面的属性会覆盖前面的属性。如果该函数只有一个参数，当参数为对象时，直接返回该对象；当参数不是对象时，会先将参数转为对象然后返回。并且该方法是<code>浅拷贝</code></li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">params</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 给ajax设定一个默认值</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> defaults = &#123;</span><br><span class=\"line\">        type: <span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">        url: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">        data: &#123;&#125;,</span><br><span class=\"line\">        header: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/x-www-form-urlencoded&#x27;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        success: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        error: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 使用Object.assign()方法 将之间的对象覆盖</span></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.assign(defaults,params)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> options = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> attr <span class=\"keyword\">in</span> params.data) &#123;</span><br><span class=\"line\">        options += attr + <span class=\"string\">&#x27;=&#x27;</span> + defaults.data[attr] + <span class=\"string\">&#x27;&amp;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    options = options.substr(<span class=\"number\">0</span>, defaults.length - <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(options)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (defaults.type === <span class=\"string\">&#x27;get&#x27;</span>) &#123;</span><br><span class=\"line\">        defaults.url = defaults.url + <span class=\"string\">&#x27;?&#x27;</span> + options</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.open(defaults.type, defaults.url)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (defaults.type == <span class=\"string\">&#x27;post&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> contentType = defaults.header[<span class=\"string\">&#x27;Content-Type&#x27;</span>]</span><br><span class=\"line\">        xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>, contentType)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (contentType === <span class=\"string\">&#x27;application/json&#x27;</span>) &#123;</span><br><span class=\"line\">            xhr.send(<span class=\"built_in\">JSON</span>.stringify(defaults.data))</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            xhr.send(options)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        xhr.send()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.onload = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 对http的状态码进行判断如果状态码为200则调用success函数，如果失败则调用error函数</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> responseHeader = xhr.getResponseHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">let</span> resText = xhr.responseText</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (responseHeader.includes(<span class=\"string\">&#x27;application/json&#x27;</span>)) &#123;</span><br><span class=\"line\">                resText = <span class=\"built_in\">JSON</span>.parse(resText)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            defaults.success(resText, xhr)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            defaults.error(resText, xhr)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ajax(&#123;</span><br><span class=\"line\">    url: <span class=\"string\">&#x27;http://localhost:3000/responseData&#x27;</span>,</span><br><span class=\"line\">    data: &#123;</span><br><span class=\"line\">        name: <span class=\"string\">&#x27;sz&#x27;</span>,</span><br><span class=\"line\">        age: <span class=\"number\">20</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    success: <span class=\"function\">(<span class=\"params\">data, xhr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;这里是success函数&#x27;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(xhr);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n<h2 id=\"模板引擎\"><a href=\"#模板引擎\" class=\"headerlink\" title=\"模板引擎\"></a>模板引擎</h2><ol>\n<li>使用模板引擎 <code>art-template</code> 在客户端的使用步骤</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板引擎<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/js/art-template.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/html&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;idt&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">username</span>&#125;&#125;</span><span class=\"xml\"> </span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">age</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> html = template(<span class=\"string\">&#x27;idt&#x27;</span>,&#123;<span class=\"attr\">username</span>:<span class=\"string\">&#x27;zs&#x27;</span>,<span class=\"attr\">age</span>:<span class=\"number\">20</span>&#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.container&#x27;</span>).innerHTML = html</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"验证邮箱\"><a href=\"#验证邮箱\" class=\"headerlink\" title=\"验证邮箱\"></a>验证邮箱</h2><details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>验证邮箱地址<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/js/ajax.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- &lt;script src=&quot;/js/template.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">        body &#123;</span><br><span class=\"line\">            background: -webkit-linear-gradient(left, rgb(216, 236, 235), rgb(241, 229, 241));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.box</span> &#123;</span></span><br><span class=\"line\">            margin: 200px auto;</span><br><span class=\"line\">            display: flex;</span><br><span class=\"line\">            justify-content: center;</span><br><span class=\"line\">            align-items: center;</span><br><span class=\"line\">            flex-direction: column;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.email_login</span> &#123;</span></span><br><span class=\"line\">            border-radius: 10px;</span><br><span class=\"line\">            width: 400px;</span><br><span class=\"line\">            height: 30px;</span><br><span class=\"line\">            padding: 10px;</span><br><span class=\"line\"><span class=\"css\">            <span class=\"comment\">/* outline-color: aliceblue; */</span></span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.email_login</span><span class=\"selector-pseudo\">:hover</span> &#123;</span></span><br><span class=\"line\">            outline-color: bisque;</span><br><span class=\"line\">            border: none;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.message</span> &#123;</span></span><br><span class=\"line\">            background: rgb(221, 208, 208);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.success</span> &#123;</span></span><br><span class=\"line\">            background-color: rgb(82, 82, 173);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-class\">.error</span> &#123;</span></span><br><span class=\"line\">            background-color: rgb(226, 106, 106);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;email&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;email_login&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;请在此输入您要初测的邮箱账号！！&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;message&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 获取元素</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> email = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.email_login&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> message = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;p&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 当输入框失去焦点时的事件</span></span></span><br><span class=\"line\"><span class=\"javascript\">        email.onblur = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// console.log(e);</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 获取用户输入的值，对用户输入的值判断</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> email_value = <span class=\"built_in\">this</span>.value</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 正则判断输入的值</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> reg = <span class=\"regexp\">/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span> (!reg.test(email_value)) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                message.innerHTML = <span class=\"string\">&#x27;输入的邮箱规则格式有误，请重新输入！！！&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">                message.className = <span class=\"string\">&#x27;message&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">return</span>;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            ajax(&#123;</span><br><span class=\"line\"><span class=\"javascript\">                type: <span class=\"string\">&#x27;post&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                url: <span class=\"string\">&quot;http://localhost:3000/emailbox&quot;</span>,</span></span><br><span class=\"line\">                data: &#123;</span><br><span class=\"line\">                    email: email_value</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\"><span class=\"javascript\">                success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">response</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"keyword\">if</span> (response.message.includes(<span class=\"string\">&#x27;恭喜&#x27;</span>)) &#123;</span></span><br><span class=\"line\">                        message.innerHTML = response.message</span><br><span class=\"line\"><span class=\"javascript\">                        message.className = <span class=\"string\">&#x27;success&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\">                        message.innerHTML = response.message</span><br><span class=\"line\"><span class=\"javascript\">                        message.className = <span class=\"string\">&#x27;error&#x27;</span></span></span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\"><span class=\"javascript\">                error: <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\">                    message.innerHTML = res.message</span><br><span class=\"line\"><span class=\"javascript\">                    message.className = <span class=\"string\">&#x27;error&#x27;</span></span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<details green><summary> <p>请求路由</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.get(<span class=\"string\">&#x27;/emailbox&#x27;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(req.query.email == <span class=\"string\">&#x27;iui9@qq.com&#x27;</span>)&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;您好邮箱已注册，请您重新输入！！&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;恭喜您注册的邮箱可用！！！！&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/emailbox&#x27;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(req.body.email == <span class=\"string\">&#x27;iui9@qq.com&#x27;</span>)&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;您好邮箱已注册，请您重新输入！！&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;恭喜您注册的邮箱可用！！！！&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<details green><summary> <p>ajax封装</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">params</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 给ajax设定一个默认值</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> defaults = &#123;</span><br><span class=\"line\">        type: <span class=\"string\">&#x27;get&#x27;</span>,</span><br><span class=\"line\">        url: <span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">        data: &#123;&#125;,</span><br><span class=\"line\">        header: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;Content-Type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        success: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;&#125;,</span><br><span class=\"line\">        error: <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 使用Object.assign()方法 将之间的对象覆盖</span></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.assign(defaults,params)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> options = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> attr <span class=\"keyword\">in</span> params.data) &#123;</span><br><span class=\"line\">        options += attr + <span class=\"string\">&#x27;=&#x27;</span> + defaults.data[attr] + <span class=\"string\">&#x27;&amp;&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    options = options.substr(<span class=\"number\">0</span>, defaults.length - <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"comment\">// console.log(options)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (defaults.type === <span class=\"string\">&#x27;get&#x27;</span>) &#123;</span><br><span class=\"line\">        defaults.url = defaults.url + <span class=\"string\">&#x27;?&#x27;</span> + options</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.open(defaults.type, defaults.url)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (defaults.type == <span class=\"string\">&#x27;post&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> contentType = defaults.header[<span class=\"string\">&#x27;Content-Type&#x27;</span>]</span><br><span class=\"line\">        xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>, contentType)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (contentType === <span class=\"string\">&#x27;application/json&#x27;</span>) &#123;</span><br><span class=\"line\">            xhr.send(<span class=\"built_in\">JSON</span>.stringify(defaults.data))</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            xhr.send(options)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        xhr.send()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    xhr.onload = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 对http的状态码进行判断如果状态码为200则调用success函数，如果失败则调用error函数</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (xhr.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">let</span> responseHeader = xhr.getResponseHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">let</span> resText = xhr.responseText</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (responseHeader.includes(<span class=\"string\">&#x27;application/json&#x27;</span>)) &#123;</span><br><span class=\"line\">                resText = <span class=\"built_in\">JSON</span>.parse(resText)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            defaults.success(resText, xhr)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            defaults.error(resText, xhr)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"搜索框内容自动提示\"><a href=\"#搜索框内容自动提示\" class=\"headerlink\" title=\"搜索框内容自动提示\"></a>搜索框内容自动提示</h2><ol>\n<li>使用定时器的操作，延时对请求接口发送ajax请求，在每次请求之前将之前的定时器清除</li>\n<li>设置防抖操作，对用户输入的值进行判断如果用户没有在手术框中输入内容，将提示信息  使用trim()函数，将文本框中的空格清除 阻止程序向下执行 <code>return</code></li>\n</ol>\n<h2 id=\"三级联动（省市区）\"><a href=\"#三级联动（省市区）\" class=\"headerlink\" title=\"三级联动（省市区）\"></a>三级联动（省市区）</h2><ol>\n<li>接口地址：<a href=\"https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/4/province1.json\">接口地址</a></li>\n<li>JSON.stringify() 方法可以将对象的数据存储在本地的内存中</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>三级联动 省市区<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/ajax.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;js/art-template.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    body &#123;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ccc</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.box</span> &#123;</span></span><br><span class=\"line\">        margin: 100px auto;</span><br><span class=\"line\">        width: 500px;</span><br><span class=\"line\">        height: 300px;</span><br><span class=\"line\">        display: flex;</span><br><span class=\"line\">        justify-content: center;</span><br><span class=\"line\">        align-items: center;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form_group&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;province&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"comment\">&lt;!-- &lt;option value=&quot;&quot;&gt;请选择省份&lt;/option&gt; --&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form_group&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;city&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>请选择城市<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form_group&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">select</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;area&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>请选择县城<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/html&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;provinceTpl&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>请选择省份<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    </span><span class=\"template-variable\">&#123;&#123;<span class=\"name\"><span class=\"builtin-name\">each</span></span> provices_list&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;</span></span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.pindex</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">&quot;</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.provices_list</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    </span><span class=\"template-tag\">&#123;&#123;/<span class=\"name\"><span class=\"builtin-name\">each</span></span>&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/html&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;cityTpl&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>请选择城市<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    </span><span class=\"template-variable\">&#123;&#123;<span class=\"name\"><span class=\"builtin-name\">each</span></span> city_lists&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.citysName</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    </span><span class=\"template-tag\">&#123;&#123;/<span class=\"name\"><span class=\"builtin-name\">each</span></span>&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 封装一个函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> All_lists = []</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getaddressData</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">        ajax(&#123;</span><br><span class=\"line\"><span class=\"javascript\">            type: <span class=\"string\">&quot;get&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            url: <span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/4/province1.json&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">            success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">response</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(response);</span></span><br><span class=\"line\">                All_lists = response.provinces</span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&#x27;address_data&#x27;</span>, <span class=\"built_in\">JSON</span>.stringify(response.provinces))</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> province = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#province&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> city = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#city&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> addressData = <span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&#x27;address_data&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span> (!addressData) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">this</span>.getaddressData()</span></span><br><span class=\"line\"><span class=\"javascript\">    &#125; <span class=\"keyword\">else</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        All_lists = <span class=\"built_in\">JSON</span>.parse(addressData)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> provices_list = All_lists.map(<span class=\"function\">(<span class=\"params\">v,i</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> arr = &#123;<span class=\"attr\">provices_list</span>:v.provinceName,<span class=\"attr\">pindex</span>:i&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> arr</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// console.log(provices_list);</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> html = template(<span class=\"string\">&#x27;provinceTpl&#x27;</span>,&#123;provices_list&#125;)</span></span><br><span class=\"line\">        province.innerHTML = html</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 给省份选择框添加一个改变事件监听 select的变化</span></span></span><br><span class=\"line\"><span class=\"javascript\">    province.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> id = <span class=\"built_in\">this</span>.value</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> city_lists = <span class=\"built_in\">JSON</span>.parse(addressData)[<span class=\"built_in\">Number</span>(id)].citys</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// console.log(city_lists);</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> html1 = template(<span class=\"string\">&#x27;cityTpl&#x27;</span>,&#123;city_lists&#125;)</span></span><br><span class=\"line\">        city.innerHTML = html1</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"FormData对象的作用\"><a href=\"#FormData对象的作用\" class=\"headerlink\" title=\"FormData对象的作用\"></a>FormData对象的作用</h2><ol>\n<li>模拟HTML表单</li>\n<li>异步上传二进制文件</li>\n<li>本身是一个构造函数</li>\n<li>使用formidable模块来解析FormData对象</li>\n<li>formData.get(‘属性名’)，formData.set(‘属性名’,’属性值’)，formData.delete(‘key’),formData.append(‘key’,’value’)</li>\n<li>默认接收最后一个实例方法</li>\n<li>set方法和append方法的区别：在属性名已经存在的情况下，set会覆盖原来的键名的值，append会保留两个值</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>FormData对象<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;form&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 获取按钮</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> btn = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#form&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    btn.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 将普通的html表单转换为表单对象</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData(form)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.open(<span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/formData&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 发送ajax请求</span></span></span><br><span class=\"line\">        xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 监听xhr对象下面的onload事件</span></span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">if</span>(xhr.status==<span class=\"number\">200</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<details green><summary> <p>配置路由</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 加入formidable模板</span></span><br><span class=\"line\">app.post(<span class=\"string\">&#x27;/formData&#x27;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">    form.parse(req,<span class=\"function\">(<span class=\"params\">err,fields,files</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        res.send(fields)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n<h2 id=\"formData二进制上传\"><a href=\"#formData二进制上传\" class=\"headerlink\" title=\"formData二进制上传\"></a>formData二进制上传</h2><ol>\n<li>get请求方式不能用于文件的上传</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>FormData二进制文件的上传<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;file&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;file&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> file = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        file.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData()</span></span><br><span class=\"line\"><span class=\"javascript\">            formData.append(<span class=\"string\">&#x27;attrName&#x27;</span>,<span class=\"built_in\">this</span>.files[<span class=\"number\">0</span>])</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/up_file&#x27;</span>)</span></span><br><span class=\"line\">            xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">if</span>(xhr.status==<span class=\"number\">200</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"上传进度条\"><a href=\"#上传进度条\" class=\"headerlink\" title=\"上传进度条\"></a>上传进度条</h2><ol>\n<li>使用上传事件中的<code>onprogress</code>事件</li>\n</ol>\n<details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>上传进度条<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.progress_warp</span>&#123;</span></span><br><span class=\"line\">        width: 800px;</span><br><span class=\"line\">        height: 40px;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ccc</span>;</span></span><br><span class=\"line\">        border-radius: 5px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.progress_event</span>&#123;</span></span><br><span class=\"line\">        border-radius: 5px;</span><br><span class=\"line\">        width: 0;</span><br><span class=\"line\">        height: 100%;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#fff</span>;</span></span><br><span class=\"line\">        background-color: rgb(53, 27, 68);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;file&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;file&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;progress_warp&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;progress_event&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 0%;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;bar&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> file = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> bar = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#bar&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        file.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData()</span></span><br><span class=\"line\"><span class=\"javascript\">            formData.append(<span class=\"string\">&#x27;attrName&#x27;</span>,<span class=\"built_in\">this</span>.files[<span class=\"number\">0</span>])</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/up_file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.upload.onprogress = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"comment\">// console.log(e);</span></span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">let</span> bar_data = (e.loaded / e.total).toFixed(<span class=\"number\">2</span>) * <span class=\"number\">100</span> + <span class=\"string\">&#x27;%&#x27;</span></span></span><br><span class=\"line\">                bar.style.width = bar_data</span><br><span class=\"line\">                bar.innerHTML = bar_data</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">if</span>(xhr.status==<span class=\"number\">200</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"图片加载预览\"><a href=\"#图片加载预览\" class=\"headerlink\" title=\"图片加载预览\"></a>图片加载预览</h2><details green><summary> <p>查看答案</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>上传进度条<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.progress_warp</span>&#123;</span></span><br><span class=\"line\">        width: 800px;</span><br><span class=\"line\">        height: 40px;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">background-color</span>: <span class=\"selector-id\">#ccc</span>;</span></span><br><span class=\"line\">        border-radius: 5px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.box_img</span>&#123;</span></span><br><span class=\"line\">        padding: 20px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.box_img</span> <span class=\"selector-tag\">img</span>&#123;</span></span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        border-radius: 10px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.progress_event</span>&#123;</span></span><br><span class=\"line\">        border-radius: 5px;</span><br><span class=\"line\">        width: 0;</span><br><span class=\"line\">        display: flex;</span><br><span class=\"line\">        justify-content: center;</span><br><span class=\"line\">        align-items: center;</span><br><span class=\"line\">        font-size: 20px;</span><br><span class=\"line\">        font-weight: 550;</span><br><span class=\"line\">        margin: 10px 0;</span><br><span class=\"line\">        height: 100%;</span><br><span class=\"line\"><span class=\"css\">        <span class=\"selector-tag\">color</span>: <span class=\"selector-id\">#fff</span>;</span></span><br><span class=\"line\">        background-color: rgb(53, 27, 68);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;file&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;file&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box_img&quot;</span>&gt;</span></span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;progress_warp&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;progress_event&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width: 0%;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;bar&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> file = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> bar = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#bar&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> box_img = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.box_img&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        file.onchange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData()</span></span><br><span class=\"line\"><span class=\"javascript\">            formData.append(<span class=\"string\">&#x27;attrName&#x27;</span>,<span class=\"built_in\">this</span>.files[<span class=\"number\">0</span>])</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;post&#x27;</span>,<span class=\"string\">&#x27;http://localhost:3000/up_file&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.upload.onprogress = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"comment\">// console.log(e);</span></span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">let</span> bar_data = (e.loaded / e.total).toFixed(<span class=\"number\">2</span>) * <span class=\"number\">100</span> + <span class=\"string\">&#x27;%&#x27;</span></span></span><br><span class=\"line\">                bar.style.width = bar_data</span><br><span class=\"line\">                bar.innerHTML = bar_data</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">if</span>(xhr.status==<span class=\"number\">200</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// console.log(xhr.responseText);</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// 动态创建一个图片 将上传的文件的路径名称赋值给uploads</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"keyword\">let</span> img = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;img&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">                    img.src= <span class=\"string\">&#x27;/uploads&#x27;</span> + <span class=\"built_in\">JSON</span>.parse(xhr.responseText).path</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// 调用图片上传成功的事件onload</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    img.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\">                        box_img.appendChild(img)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"ajax问题\"><a href=\"#ajax问题\" class=\"headerlink\" title=\"ajax问题\"></a>ajax问题</h2><ol>\n<li>ajax不能向非同源服务器端发送请求</li>\n<li>使用jsonp解决同源限制问题   </li>\n</ol>\n<ul>\n<li>将不同源的服务器请求地址写在script标签的src属性中</li>\n<li>服务端响应数据必须是以一个函数的调用</li>\n<li>在客户端全局作用域下定义函数fn（在script标签的上面）</li>\n<li>在函数内部对服务器端返回的数据进处理</li>\n</ul>\n<h2 id=\"post请求格式\"><a href=\"#post请求格式\" class=\"headerlink\" title=\"post请求格式\"></a>post请求格式</h2><ol>\n<li>必须有请求头：content-type:application/x-www-form-unlencoded<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>post请求的两种方式<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 第一种使用url形式的请求方式 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- &lt;script type=&quot;text/javascript&quot;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">        let xhr = new XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"comment\">        xhr.open(&#x27;post&#x27;, &#x27;http://localhost:3000/post&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\">        xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;)</span></span><br><span class=\"line\"><span class=\"comment\">        params = &quot;name=zs&amp;age=12&quot;</span></span><br><span class=\"line\"><span class=\"comment\">        xhr.send(params)</span></span><br><span class=\"line\"><span class=\"comment\">        xhr.onload = function () &#123;</span></span><br><span class=\"line\"><span class=\"comment\">            console.log(xhr.responseText);</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;/script&gt; --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 第二种使用json形式 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.open(<span class=\"string\">&#x27;post&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/post&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.setRequestHeader(<span class=\"string\">&#x27;Content-Type&#x27;</span>, <span class=\"string\">&#x27;application/json&#x27;</span>)</span></span><br><span class=\"line\">        params = &#123;</span><br><span class=\"line\"><span class=\"javascript\">            name: <span class=\"string\">&#x27;zs&#x27;</span>,</span></span><br><span class=\"line\">            age: 2</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        xhr.send(<span class=\"built_in\">JSON</span>.stringify(params))</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n</li>\n</ol>\n<h2 id=\"jsonp请求封装\"><a href=\"#jsonp请求封装\" class=\"headerlink\" title=\"jsonp请求封装\"></a>jsonp请求封装</h2><details red><summary> <p>查看客户端</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>jsonp的调用<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn1&quot;</span>&gt;</span>jsonP提交<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn2&quot;</span>&gt;</span>jsonP提交<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> btn1 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;btn1&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> btn2 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;btn2&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        btn2.onclick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\">            jsonP(&#123;</span><br><span class=\"line\"><span class=\"javascript\">                url: <span class=\"string\">&#x27;http://localhost:3000/better&#x27;</span>,</span></span><br><span class=\"line\">                data:&#123;</span><br><span class=\"line\"><span class=\"javascript\">                    name:<span class=\"string\">&#x27;zs&#x27;</span>,</span></span><br><span class=\"line\">                    age:23</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\"><span class=\"javascript\">                success: <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(e)</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(<span class=\"number\">123</span>)</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 封装一个jsonP函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">jsonP</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">var</span> script = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;script&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 将传递的data取出来</span></span></span><br><span class=\"line\"><span class=\"javascript\">            params = <span class=\"string\">&#x27;&#x27;</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> arr <span class=\"keyword\">in</span> e.data)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                params+=<span class=\"string\">`&amp;<span class=\"subst\">$&#123;arr&#125;</span>=<span class=\"subst\">$&#123;e.data[arr]&#125;</span>`</span></span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 设置window下的随机函数名</span></span></span><br><span class=\"line\"><span class=\"javascript\">            fName = <span class=\"string\">&#x27;myjson&#x27;</span> + <span class=\"built_in\">Math</span>.random().toString().replace(<span class=\"string\">&#x27;.&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 设置src中的请求地址</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">window</span>[fName] = e.success</span></span><br><span class=\"line\"><span class=\"javascript\">            script.src = e.url + <span class=\"string\">`?callback=<span class=\"subst\">$&#123;fName+params&#125;</span>`</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">document</span>.body.appendChild(script)</span></span><br><span class=\"line\"><span class=\"javascript\">            script.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">document</span>.body.removeChild(script)</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n<details red><summary> <p>查看服务器</p> </summary>\n              <div class='content'>\n              <p>}</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.get(<span class=\"string\">&#x27;/better&#x27;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// const fName = req.query.callback</span></span><br><span class=\"line\">    <span class=\"comment\">// const result = fName + &#x27;(&#123;name:&quot;zs&quot;&#125;)&#x27;</span></span><br><span class=\"line\">    <span class=\"comment\">// res.send(result)</span></span><br><span class=\"line\">    res.jsonp(&#123;<span class=\"attr\">name</span>:<span class=\"string\">&#x27;zs&#x27;</span>,<span class=\"attr\">age</span>:<span class=\"number\">98</span>&#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"腾讯天气API\"><a href=\"#腾讯天气API\" class=\"headerlink\" title=\"腾讯天气API\"></a>腾讯天气API</h2><details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@v0.47/js/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">href</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@frame/frame/bootstrap/3/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@frame/frame/bootstrap/3/js/bootstrap.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/js/art-template.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"css\">    <span class=\"selector-class\">.ta</span>&#123;</span></span><br><span class=\"line\">        margin: 100px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    th&#123;</span><br><span class=\"line\">        text-align: center;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;ta table-responsive&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;table table-striped table-bordered table-hover text-center&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>degree<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>update_time<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>weather<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>weather_code<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>weather_short<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>wind_direction<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>wind_power<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">thead</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">tbody</span> <span class=\"attr\">id</span>=<span class=\"string\">&#x27;html&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">tbody</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;/js/jsonp.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/html&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;tpl&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        </span><span class=\"template-variable\">&#123;&#123;<span class=\"name\"><span class=\"builtin-name\">each</span></span> info&#125;&#125;</span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.degree</span> + <span class=\"string\">&#x27;°&#x27;</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">dateFormat</span>(<span class=\"name\">$value.update_time</span>)&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.weather</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.weather_code</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.weather_short</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.wind_direction</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">            <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123;<span class=\"name\">$value.wind_power</span>+<span class=\"string\">&#x27;级&#x27;</span>&#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">        </span><span class=\"template-tag\">&#123;&#123;/<span class=\"name\"><span class=\"builtin-name\">each</span></span>&#125;&#125;</span></span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> datas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;html&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 构造一个date函数</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dateFormat</span>(<span class=\"params\">dates</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> year = dates.substr(<span class=\"number\">0</span>,<span class=\"number\">4</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> mounth = dates.substr(<span class=\"number\">4</span>,<span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> day = dates.substr(<span class=\"number\">6</span>,<span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> hour = dates.substr(<span class=\"number\">8</span>,<span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> min = dates.substr(<span class=\"number\">10</span>,<span class=\"number\">2</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;year&#125;</span>-<span class=\"subst\">$&#123;mounth&#125;</span>-<span class=\"subst\">$&#123;day&#125;</span> <span class=\"subst\">$&#123;hour&#125;</span>:<span class=\"subst\">$&#123;min&#125;</span>`</span></span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 将自定义函数开放到模板中</span></span></span><br><span class=\"line\">        template.defaults.imports.dateFormat = dateFormat</span><br><span class=\"line\">        jsonP(&#123;</span><br><span class=\"line\"><span class=\"javascript\">            url: <span class=\"string\">&#x27;https://wis.qq.com/weather/common&#x27;</span>,</span></span><br><span class=\"line\">            data: &#123;</span><br><span class=\"line\"><span class=\"javascript\">                source: <span class=\"string\">&#x27;pc&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                weather_type: <span class=\"string\">&#x27;forecast_1h|forecast_24h&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                province: <span class=\"string\">&#x27;山西省&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                city: <span class=\"string\">&#x27;晋中市&#x27;</span></span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"><span class=\"javascript\">            success: <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"comment\">// console.log(e);</span></span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">let</span> html = template(<span class=\"string\">&#x27;tpl&#x27;</span>, &#123; <span class=\"attr\">info</span>: e.data.forecast_1h &#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"comment\">// console.log(html);</span></span></span><br><span class=\"line\">                datas.innerHTML = html</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"cors-跨域资源共享\"><a href=\"#cors-跨域资源共享\" class=\"headerlink\" title=\"cors 跨域资源共享\"></a>cors 跨域资源共享</h2><ol>\n<li>使用express方法 设置请求的报文</li>\n<li>使用express模块中的中间件拦截请求  app.use</li>\n<li>设置服务器的响应报文  <code>res.header(&#39;Access-Control-Allow-Origin&#39;,&#39;*&#39;)</code></li>\n<li>设置请求方法 <code>res.header(&#39;Access-Control-Allow-Method&#39;:&#39;get,post&#39;)</code></li>\n<li>注意在使用中间件拦截时  一定要注意放行，否则无法执行后面的内容 <code>next()</code></li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <p>}</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.use(<span class=\"function\">(<span class=\"params\">req,res,next</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    res.header(<span class=\"string\">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class=\"string\">&#x27;*&#x27;</span>)</span><br><span class=\"line\">    res.header(<span class=\"string\">&#x27;Access-Control-Allow-Methods&#x27;</span>,<span class=\"string\">&#x27;get,post&#x27;</span>)</span><br><span class=\"line\">    next()</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"cookie复习\"><a href=\"#cookie复习\" class=\"headerlink\" title=\"cookie复习\"></a>cookie复习</h2><ol>\n<li><code>withCredentials</code>：指定在涉及到跨域请求时，是否携带cookie信息，默认值为false</li>\n<li><code>Access-Control-Allow-Credentials</code>:true 允许客户端发送请求时携带cookie</li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>设置cook信息<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;loginForm&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;用户名&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;密码&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;pwd&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;logined&quot;</span>&gt;</span>登录<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;checklogin&quot;</span>&gt;</span>检测登录<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> loginform = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;loginForm&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> logined = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;logined&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> checklogin = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;checklogin&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 监听请求</span></span></span><br><span class=\"line\"><span class=\"javascript\">        logined.onclick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData(loginform)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;post&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/logins&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.withCredentials = <span class=\"literal\">true</span></span></span><br><span class=\"line\">            xhr.send(formData)</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        checklogin.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">            xhr.open(<span class=\"string\">&#x27;get&#x27;</span>, <span class=\"string\">&#x27;http://localhost:3000/checklogin&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// xhr.withCredentials = true</span></span></span><br><span class=\"line\">            xhr.send()</span><br><span class=\"line\"><span class=\"javascript\">            xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"built_in\">console</span>.log(xhr.responseText);</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.post(<span class=\"string\">&#x27;/logins&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(res);</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">    form.parse(req, <span class=\"function\">(<span class=\"params\">err, fields, files</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(fields);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (fields.username == <span class=\"string\">&#x27;123&#x27;</span> &amp;&amp; fields.pwd == <span class=\"string\">&#x27;123&#x27;</span>) &#123;</span><br><span class=\"line\">            req.session.isLogin = <span class=\"literal\">true</span></span><br><span class=\"line\">            res.send(&#123; <span class=\"attr\">message</span>: <span class=\"string\">&#x27;登录成功&#x27;</span>, <span class=\"attr\">code</span>: <span class=\"number\">1</span> &#125;)</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            res.send(&#123; <span class=\"attr\">message</span>: <span class=\"string\">&#x27;登录失败&#x27;</span>, <span class=\"attr\">code</span>: -<span class=\"number\">1</span> &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// res.send(fields)</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 解析formdata</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;/checklogin&#x27;</span>, <span class=\"function\">(<span class=\"params\">req, res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (req.session.isLogin) &#123;</span><br><span class=\"line\">        res.send(&#123; <span class=\"attr\">message</span>: <span class=\"string\">&#x27;当前已登录&#x27;</span> &#125;)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        res.send(&#123;<span class=\"attr\">message</span>:<span class=\"string\">&#x27;当前未登录&#x27;</span>&#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"jquery中的-ajax\"><a href=\"#jquery中的-ajax\" class=\"headerlink\" title=\"jquery中的$.ajax()\"></a>jquery中的$.ajax()</h2><ol>\n<li>请求参数时，默认为application/x-www-form-encoded</li>\n<li>如果使用json对象，需要将json对象转换成json字符串，并且将类型设置为application/json</li>\n<li><code>beforeSend</code> 表示在发送ajax请求前执行的 可在其中测试传递的参数，不满足条件可以使用<code>return false</code></li>\n</ol>\n<h3 id=\"seralize方法\"><a href=\"#seralize方法\" class=\"headerlink\" title=\"seralize方法\"></a>seralize方法</h3><ol>\n<li>将表单中的数据自动拼接成字符串类型，如：<code>name=zs&amp;age=12</code></li>\n<li>使用<code>sealizeArray()</code>方法将用户输入的内容转换成数组形式</li>\n<li>封装一个函数使数组形式转换为json对象</li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>使用jquery中的serialize方法<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;form&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;用户名&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;password&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;pwd&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;用户名&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@v0.47/js/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">&#x27;#form&#x27;</span>).on(<span class=\"string\">&#x27;submit&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//    let params =  $(&quot;#form&quot;).serialize()</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//    console.log(params);</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">//    return false;</span></span></span><br><span class=\"line\"><span class=\"javascript\">            serializeObject($(<span class=\"built_in\">this</span>))</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span></span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">serializeObject</span>(<span class=\"params\">obj</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> result = &#123;&#125;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> params = obj.serializeArray()</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// console.log(params)</span></span></span><br><span class=\"line\"><span class=\"javascript\">            $.each(params,<span class=\"function\">(<span class=\"params\">index,item</span>)=&gt;</span>&#123;</span></span><br><span class=\"line\">                result[item.name] = item.value</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">console</span>.log(result);</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> result</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"ajax-发送jsonp请求\"><a href=\"#ajax-发送jsonp请求\" class=\"headerlink\" title=\"$.ajax() 发送jsonp请求\"></a>$.ajax() 发送jsonp请求</h2><ol>\n<li><code>dataType:&#39;jsonp&#39;</code>   </li>\n<li><code>jsonCallback:&#39;fnName&#39;</code>  指定函数名称</li>\n<li><code>jsonp:&#39;cb&#39;</code>  修改callback名称</li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>使用jquery中的jsonp方法<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.jsdelivr.net/gh/Rr210/hexofixed@v0.47/js/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span></span><br><span class=\"line\">        发送请求</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// $(&#x27;#btn&#x27;).on(&#x27;click&#x27;,function()&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     $.ajax(&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//         type:&#x27;get&#x27;,</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//         url:&#x27;jsonp&#x27;,</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//         success:(res)=&gt;&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//             console.log(res);</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//         &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//     &#125;)</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// &#125;)</span></span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">&#x27;#btn&#x27;</span>).on(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            $.ajax(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                url:<span class=\"string\">&quot;/jsonp&quot;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                type:<span class=\"string\">&#x27;get&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                dataType:<span class=\"string\">&#x27;jsonp&#x27;</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                success:<span class=\"function\">(<span class=\"params\">res</span>)=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"built_in\">console</span>.log(res);</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"todoList-案例\"><a href=\"#todoList-案例\" class=\"headerlink\" title=\"todoList 案例\"></a>todoList 案例</h2><ol>\n<li>GitHub地址：【<a href=\"https://github.com/Rr210/node-js\">github</a>】</li>\n<li>使用技术<code>node.js+express+mongoose</code></li>\n</ol>\n<h2 id=\"ajax请求\"><a href=\"#ajax请求\" class=\"headerlink\" title=\"ajax请求\"></a>ajax请求</h2><ol>\n<li>ajaxStart方法为当页面中有ajax请求时触发</li>\n<li>ajaxComplete 方法为当页面中ajax请求完成时触发</li>\n</ol>\n<h2 id=\"RESful风格\"><a href=\"#RESful风格\" class=\"headerlink\" title=\"RESful风格\"></a>RESful风格</h2><ol>\n<li>规范API设计</li>\n<li><code>get/put/delete/</code></li>\n<li><code>req.params</code> 获取get请求参数  地址为：<code>user/:id</code></li>\n</ol>\n<h2 id=\"XML是可扩展标记语言\"><a href=\"#XML是可扩展标记语言\" class=\"headerlink\" title=\"XML是可扩展标记语言\"></a>XML是可扩展标记语言</h2><ol>\n<li>作用是传输和存储数据</li>\n<li>XML DOM 即XML文档对象模型</li>\n</ol>\n<details red><summary> <p>查看解析</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>XML的获取<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;btn&quot;</span>&gt;</span>发送请求<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> btn = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&#x27;btn&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">let</span> container = <span class=\"built_in\">document</span>.getElementsByClassName(<span class=\"string\">&#x27;container&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    btn.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest()</span></span><br><span class=\"line\"><span class=\"javascript\">        xhr.open(<span class=\"string\">&#x27;get&#x27;</span>,<span class=\"string\">&#x27;https://u.mr90.top/other/atom.xml&#x27;</span>)</span></span><br><span class=\"line\">        xhr.send()</span><br><span class=\"line\"><span class=\"javascript\">        xhr.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> xmlDocument = xhr.responseXML</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> title = xmlDocument.querySelectorAll(<span class=\"string\">&#x27;entry title&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 使用map函数将原来数组中的元素提取出来 组成新的数组</span></span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> arr = [...title]</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> title_all = arr.map(<span class=\"function\"><span class=\"params\">v</span>=&gt;</span>v.innerHTML)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">let</span> html = template(<span class=\"string\">&#x27;tit&#x27;</span>,&#123;title_all&#125;)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"comment\">// 将获取的html数组通过模板方法渲染到页面上</span></span></span><br><span class=\"line\">            container.innerHTML = html</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"数组转换\"><a href=\"#数组转换\" class=\"headerlink\" title=\"数组转换\"></a>数组转换</h2><ol>\n<li>使用<code>Array.prototype.slice.call(nodes,0)</code> nodes为伪数组</li>\n<li>使用es6中的方法  <code>[...arr]</code> 或者使用<code>Array.from(obj)</code>的方法进行转换</li>\n</ol>\n","categories":[{"name":"web","path":"api/categories/web.json"},{"name":"ajax","path":"api/categories/ajax.json"}],"tags":[]}