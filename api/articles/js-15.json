{"title":"Javascript的知识总结（15）","slug":"js-15","date":"2021-02-18T03:34:19.000Z","updated":"2022-07-24T14:53:13.279Z","comments":true,"path":"api/articles/js-15.json","excerpt":null,"covers":null,"content":"<div class=\"snote bug\"><p>网页轮播图</p></div>\n\n<h2 id=\"网页轮播图\"><a href=\"#网页轮播图\" class=\"headerlink\" title=\"网页轮播图\"></a>网页轮播图</h2><ol>\n<li>核心原理：使用动画函数，点击小圆圈，使用小圆圈的索引号来判断图片移动的距离</li>\n<li>使用getAttribute 通过自定义属性来记录小圈圈的索引号</li>\n<li>无缝滚动：克隆第一张，实现无缝跳转，克隆第一个节点cloneNode(),没有true浅克隆</li>\n</ol>\n<details green><summary> <p>查看案例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&#x27;DOMContentLoaded&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> w = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;.w&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> mains = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">&#x27;main&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> lunbo = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.lunbo&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> focus = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.focus&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ul = focus.querySelector(<span class=\"string\">&#x27;ul&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ulli = ul.querySelector(<span class=\"string\">&#x27;li&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">var</span> cul = lunbo.querySelector(<span class=\"string\">&#x27;ul&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> focuswidth = focus.offsetWidth;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> circle = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(ul.children.length);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(lunbo);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(w);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(mains);</span></span><br><span class=\"line\">    onmouseover = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        lunbo.children[<span class=\"number\">0</span>].style.display = <span class=\"string\">&#x27;block&#x27;</span></span><br><span class=\"line\">        lunbo.children[<span class=\"number\">1</span>].style.display = <span class=\"string\">&#x27;block&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    onmouseout = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        lunbo.children[<span class=\"number\">0</span>].style.display = <span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">        lunbo.children[<span class=\"number\">1</span>].style.display = <span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 动态生成图片</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; ul.children.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> cli = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;li&#x27;</span>);</span><br><span class=\"line\">        cli.setAttribute(<span class=\"string\">&#x27;index&#x27;</span>, i);</span><br><span class=\"line\">        cul.appendChild(cli);</span><br><span class=\"line\">        <span class=\"comment\">// 使用排他思想,先全部清空再给当前的xiaoli设置元素类型</span></span><br><span class=\"line\">        cli.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; ul.children.length - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">                cul.children[i].className = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(cul.children[i]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.className = <span class=\"string\">&#x27;current&#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> index = <span class=\"built_in\">this</span>.getAttribute(<span class=\"string\">&#x27;index&#x27;</span>);</span><br><span class=\"line\">            <span class=\"comment\">// 点击后获取小圈圈当前的索引值，并将值赋值给控制小圈圈的circle和控制图片所在位置的num</span></span><br><span class=\"line\">            num = circle = index; </span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// console.log(index);</span></span><br><span class=\"line\">            <span class=\"comment\">// console.log(focuswidth);</span></span><br><span class=\"line\">            animate(ul, -index * focuswidth, <span class=\"number\">1</span>)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    cul.children[<span class=\"number\">0</span>].className = <span class=\"string\">&#x27;current&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> firstimg = ulli.cloneNode(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    ul.append(firstimg);</span><br><span class=\"line\">    <span class=\"comment\">// 点击右侧按钮图片移动一张</span></span><br><span class=\"line\">    lunbo.children[<span class=\"number\">1</span>].addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 生成第一张图片克隆</span></span><br><span class=\"line\">        num++;</span><br><span class=\"line\">        <span class=\"comment\">// 通过缓动动画来控制图片的移动</span></span><br><span class=\"line\">        animate(ul, -num * focuswidth, <span class=\"number\">15</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (num == ul.children.length - <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            ul.style.left = <span class=\"number\">0</span>;</span><br><span class=\"line\">            num = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        circle++;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (circle == cul.children.length) &#123;</span><br><span class=\"line\">            circle = <span class=\"number\">0</span>;</span><br><span class=\"line\">            cul.children[cul.children.length - <span class=\"number\">1</span>].className = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">            cul.children[<span class=\"number\">0</span>].className = <span class=\"string\">&#x27;current&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt;= cul.children.length - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">                cul.children[i].className = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            cul.children[circle].className = <span class=\"string\">&#x27;current&#x27;</span></span><br><span class=\"line\">            <span class=\"comment\">// 小圆圈跟随变</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 左侧按钮</span></span><br><span class=\"line\">    <span class=\"comment\">// 点击左侧按钮图片移动一张</span></span><br><span class=\"line\">    lunbo.children[<span class=\"number\">0</span>].addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 生成第一张图片克隆</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (num == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            num = ul.children.length - <span class=\"number\">1</span>;</span><br><span class=\"line\">            ul.style.left = -num * focuswidth + <span class=\"string\">&#x27;px&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        num--;</span><br><span class=\"line\">        animate(ul, -num * focuswidth, <span class=\"number\">15</span>);</span><br><span class=\"line\">        <span class=\"comment\">// if (num == ul.children.length - 1) &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">//     ul.style.left = 0;</span></span><br><span class=\"line\">        <span class=\"comment\">//     num = 0;</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">        circle--;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (circle &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            circle = cul.children.length - <span class=\"number\">1</span>;</span><br><span class=\"line\">            cul.children[circle].className = <span class=\"string\">&#x27;current&#x27;</span>;</span><br><span class=\"line\">            cul.children[<span class=\"number\">0</span>].className = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt;= cul.children.length - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">                cul.children[i].className = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            cul.children[circle].className = <span class=\"string\">&#x27;current&#x27;</span></span><br><span class=\"line\">            <span class=\"comment\">// 小圆圈跟随变</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"自动播放\"><a href=\"#自动播放\" class=\"headerlink\" title=\"自动播放\"></a>自动播放</h2><ol>\n<li>定时器，手动调用事件</li>\n<li>事件.click</li>\n</ol>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> timerr = <span class=\"built_in\">setInterval</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    lunbo.children[<span class=\"number\">1</span>].click();</span><br><span class=\"line\">&#125;,<span class=\"number\">2000</span>)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details> \n\n<h2 id=\"节流阀\"><a href=\"#节流阀\" class=\"headerlink\" title=\"节流阀\"></a>节流阀</h2><blockquote>\n<p>使用回调函数，在点击事件后添加一个flag=true，来控制速率</p>\n</blockquote>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">obj.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">flag=<span class=\"literal\">false</span>;</span><br><span class=\"line\">animate(obj,target,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"返回顶部案例\"><a href=\"#返回顶部案例\" class=\"headerlink\" title=\"返回顶部案例\"></a>返回顶部案例</h2><ol>\n<li>方法一：使html/body元素滚轮距离顶部为0<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">btn.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.scrollTop = <span class=\"built_in\">document</span>.documentElement.scrollTop = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details></li>\n<li>方法二: 控制window滚轮的位置<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">btn.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.scroll(<span class=\"number\">0</span>,<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details></li>\n<li>方法三：引入缓动动画函数<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 第三种 引入缓动函数</span></span><br><span class=\"line\">btn.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    animateY(<span class=\"built_in\">window</span>,<span class=\"number\">0</span>,<span class=\"number\">15</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n</li>\n</ol>\n<h2 id=\"移动端事件\"><a href=\"#移动端事件\" class=\"headerlink\" title=\"移动端事件\"></a>移动端事件</h2><ol>\n<li>触屏事件，touchstart/touchmove/touched</li>\n<li>触摸事件TouchEvent</li>\n<li>// touches正在触摸屏幕的所有手指的列表// targetTouches  在触摸当前元素DOM的手指列表// changedTouches 检测手指列表，手指状态变化// 当手指离开屏幕时 touches和targetTouches列表没有，只能拿到changedTouches</li>\n<li>拖动元素三部曲：</li>\n</ol>\n<ul>\n<li>触摸元素touchstart：获取手指的初始位置，同时获得盒子原来的位置</li>\n<li>移动手指 touchmove 计算手指滑动距离，并且移动盒子，手指移动的距离加上盒子原来的位置</li>\n<li>离开手指 touchend</li>\n</ul>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    div&#123;</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        height: 200px;</span><br><span class=\"line\">        background-color: rgb(24, 153, 212);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> startX = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> startY = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> y = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> div =<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;div&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    div.addEventListener(<span class=\"string\">&#x27;touchstart&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;我开始模拟了&#x27;</span>);</span></span><br><span class=\"line\">        startX = e.targetTouches[0].pageX;</span><br><span class=\"line\">        startY = e.targetTouches[0].pageY;</span><br><span class=\"line\"><span class=\"javascript\">        x = <span class=\"built_in\">this</span>.offsetLeft;</span></span><br><span class=\"line\"><span class=\"javascript\">        y = <span class=\"built_in\">this</span>.offsetTop;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// touches正在触摸屏幕的所有手指的列表</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// targetTouches  在触摸当前元素DOM的手指列表</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// changedTouches 检测手指列表，手指状态变化</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 当手指离开屏幕时 touches和targetTouches列表没有，只能拿到changedTouches</span></span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"javascript\">    div.addEventListener(<span class=\"string\">&#x27;touchmove&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> moveX = e.targetTouches[<span class=\"number\">0</span>].pageX - startX;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> moveY = e.targetTouches[<span class=\"number\">0</span>].pageY -startY;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">this</span>.style.left = x + moveX +<span class=\"string\">&#x27;px&#x27;</span>;            </span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">this</span>.style.top = y + moveY +<span class=\"string\">&#x27;px&#x27;</span>;  </span></span><br><span class=\"line\">        e.preventDefault();          </span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"移动端无缝滚动\"><a href=\"#移动端无缝滚动\" class=\"headerlink\" title=\"移动端无缝滚动\"></a>移动端无缝滚动</h2><ol>\n<li>添加监听事件，加入判断事件</li>\n<li><code>transitionend</code>,在去掉过渡效果</li>\n</ol>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&#x27;load&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> focus = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.focus&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> foli = focus.querySelectorAll(<span class=\"string\">&#x27;li&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ul = focus.children[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> wid = focus.offsetWidth;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ol = focus.querySelector(<span class=\"string\">&#x27;ol&#x27;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(foli.length);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> timer = <span class=\"built_in\">setInterval</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        index++;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> indexw = -index * wid;</span><br><span class=\"line\">        ul.style.transition = <span class=\"string\">&#x27;all .4s&#x27;</span>;</span><br><span class=\"line\">        ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + indexw + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">    &#125;, <span class=\"number\">2000</span>)</span><br><span class=\"line\">    ul.addEventListener(<span class=\"string\">&#x27;transitionend&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;1&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index == <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">            index = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(index);</span><br><span class=\"line\">            ul.style.transition = <span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> indexw = -index * wid;</span><br><span class=\"line\">            ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + indexw + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (index &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            index = <span class=\"number\">2</span>;</span><br><span class=\"line\">            ul.style.transition = <span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> indexw = -index * wid;</span><br><span class=\"line\">            ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + indexw + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        ol.querySelector(<span class=\"string\">&#x27;.current&#x27;</span>).classList.remove(<span class=\"string\">&#x27;current&#x27;</span>);</span><br><span class=\"line\">        ol.children[index].classList.add(<span class=\"string\">&#x27;current&#x27;</span>);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">var</span> startx = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> movex = <span class=\"number\">0</span>;</span><br><span class=\"line\">    ul.addEventListener(<span class=\"string\">&#x27;touchstart&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> startx = e.targetTouches[<span class=\"number\">0</span>].pageX;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(startx);</span><br><span class=\"line\">        <span class=\"built_in\">clearInterval</span>(timer);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    ul.addEventListener(<span class=\"string\">&#x27;touchmove&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> movex = e.targetTouches[<span class=\"number\">0</span>].pageX - startx;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> translatex = movex + index * -wid;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(movex);</span><br><span class=\"line\">        ul.style.transition = <span class=\"string\">&#x27;none&#x27;</span>;</span><br><span class=\"line\">        ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + translatex + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    ul.addEventListener(<span class=\"string\">&#x27;touchend&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.abs(movex) &gt; <span class=\"number\">50</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (movex &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                index--;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> translatex = -index * wid;</span><br><span class=\"line\">            ul.style.transition = <span class=\"string\">&#x27;all .4s&#x27;</span>;</span><br><span class=\"line\">            ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + translatex + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> translatex = -index * wid;</span><br><span class=\"line\">            ul.style.transition = <span class=\"string\">&#x27;all .4s&#x27;</span>;</span><br><span class=\"line\">            ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + translatex + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"classList属性\"><a href=\"#classList属性\" class=\"headerlink\" title=\"classList属性\"></a>classList属性</h2><ol>\n<li><code>classList</code>属性,追加类名，和ClassName对比，不需要加<code>.</code>,移除remove，格式<code>div.classLest.add/remove</code></li>\n<li>切换类<code>document.body.classList.toggle(&#39;&#39;)</code></li>\n</ol>\n<h2 id=\"click延时解决方案\"><a href=\"#click延时解决方案\" class=\"headerlink\" title=\"click延时解决方案\"></a>click延时解决方案</h2><ol>\n<li>禁止页面的缩放</li>\n<li>封装函数，解决300ms延时情况</li>\n<li>引入js插件 <code>fastclick</code>，在GitHub仓库内</li>\n</ol>\n<details green><summary> <p>查看代码</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//https://cloud.mr90.top/hexo/4/fastclick.js</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"使用js插件-框架\"><a href=\"#使用js插件-框架\" class=\"headerlink\" title=\"使用js插件/框架\"></a>使用js插件/框架</h2><ol>\n<li>swiper的插件CDN</li>\n<li>Touchslide插件</li>\n<li>zy.media.js插件，页面适配框架适配不同浏览器</li>\n<li>框架：bootstrap（依赖JQ），vue，react，zepto</li>\n</ol>\n<h2 id=\"本地存储\"><a href=\"#本地存储\" class=\"headerlink\" title=\"本地存储\"></a>本地存储</h2><ol>\n<li>sessionStorage，生命周期为<code>关闭浏览器窗口</code></li>\n</ol>\n<ul>\n<li>格式 sessionStorage.setItem(key,value),存储</li>\n<li>sessionStorage.getItem(key)  获取</li>\n<li>sessionStorage.removeItem(key) 删除数据</li>\n<li>sessionStorage.clear();  删除全部数据</li>\n</ul>\n<ol start=\"2\">\n<li>localStroage,生命周期永久生效，使用方法雷同</li>\n</ol>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;inp&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;inp1&quot;</span>&gt;</span>记住用户</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> inp = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#inp&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> inp1 = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#inp1&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span>(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&#x27;inp&#x27;</span>))&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        inp.value = <span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&#x27;inp&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        inp1.checked = <span class=\"literal\">true</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"javascript\">    inp1.addEventListener(<span class=\"string\">&#x27;change&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">this</span>.checked &amp;&amp; inp.value != <span class=\"string\">&#x27;&#x27;</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&#x27;inp&#x27;</span>,inp.value)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">console</span>.log(inp.value);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">localStorage</span>.removeItem(<span class=\"string\">&#x27;inp&#x27;</span>)</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>","more":"<div class=\"snote bug\"><p>网页轮播图</p></div>\n\n<h2 id=\"网页轮播图\"><a href=\"#网页轮播图\" class=\"headerlink\" title=\"网页轮播图\"></a>网页轮播图</h2><ol>\n<li>核心原理：使用动画函数，点击小圆圈，使用小圆圈的索引号来判断图片移动的距离</li>\n<li>使用getAttribute 通过自定义属性来记录小圈圈的索引号</li>\n<li>无缝滚动：克隆第一张，实现无缝跳转，克隆第一个节点cloneNode(),没有true浅克隆</li>\n</ol>\n<details green><summary> <p>查看案例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&#x27;DOMContentLoaded&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> w = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">&#x27;.w&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> mains = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">&#x27;main&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> lunbo = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.lunbo&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> focus = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.focus&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ul = focus.querySelector(<span class=\"string\">&#x27;ul&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ulli = ul.querySelector(<span class=\"string\">&#x27;li&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">var</span> cul = lunbo.querySelector(<span class=\"string\">&#x27;ul&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> focuswidth = focus.offsetWidth;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> circle = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">// console.log(ul.children.length);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(lunbo);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(w);</span></span><br><span class=\"line\">    <span class=\"comment\">// console.log(mains);</span></span><br><span class=\"line\">    onmouseover = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        lunbo.children[<span class=\"number\">0</span>].style.display = <span class=\"string\">&#x27;block&#x27;</span></span><br><span class=\"line\">        lunbo.children[<span class=\"number\">1</span>].style.display = <span class=\"string\">&#x27;block&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    onmouseout = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        lunbo.children[<span class=\"number\">0</span>].style.display = <span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">        lunbo.children[<span class=\"number\">1</span>].style.display = <span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 动态生成图片</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; ul.children.length; i++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> cli = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&#x27;li&#x27;</span>);</span><br><span class=\"line\">        cli.setAttribute(<span class=\"string\">&#x27;index&#x27;</span>, i);</span><br><span class=\"line\">        cul.appendChild(cli);</span><br><span class=\"line\">        <span class=\"comment\">// 使用排他思想,先全部清空再给当前的xiaoli设置元素类型</span></span><br><span class=\"line\">        cli.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; ul.children.length - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">                cul.children[i].className = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">                <span class=\"built_in\">console</span>.log(cul.children[i]);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"built_in\">this</span>.className = <span class=\"string\">&#x27;current&#x27;</span>;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> index = <span class=\"built_in\">this</span>.getAttribute(<span class=\"string\">&#x27;index&#x27;</span>);</span><br><span class=\"line\">            <span class=\"comment\">// 点击后获取小圈圈当前的索引值，并将值赋值给控制小圈圈的circle和控制图片所在位置的num</span></span><br><span class=\"line\">            num = circle = index; </span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// console.log(index);</span></span><br><span class=\"line\">            <span class=\"comment\">// console.log(focuswidth);</span></span><br><span class=\"line\">            animate(ul, -index * focuswidth, <span class=\"number\">1</span>)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    cul.children[<span class=\"number\">0</span>].className = <span class=\"string\">&#x27;current&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> firstimg = ulli.cloneNode(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    ul.append(firstimg);</span><br><span class=\"line\">    <span class=\"comment\">// 点击右侧按钮图片移动一张</span></span><br><span class=\"line\">    lunbo.children[<span class=\"number\">1</span>].addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 生成第一张图片克隆</span></span><br><span class=\"line\">        num++;</span><br><span class=\"line\">        <span class=\"comment\">// 通过缓动动画来控制图片的移动</span></span><br><span class=\"line\">        animate(ul, -num * focuswidth, <span class=\"number\">15</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (num == ul.children.length - <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            ul.style.left = <span class=\"number\">0</span>;</span><br><span class=\"line\">            num = <span class=\"number\">0</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        circle++;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (circle == cul.children.length) &#123;</span><br><span class=\"line\">            circle = <span class=\"number\">0</span>;</span><br><span class=\"line\">            cul.children[cul.children.length - <span class=\"number\">1</span>].className = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">            cul.children[<span class=\"number\">0</span>].className = <span class=\"string\">&#x27;current&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt;= cul.children.length - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">                cul.children[i].className = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            cul.children[circle].className = <span class=\"string\">&#x27;current&#x27;</span></span><br><span class=\"line\">            <span class=\"comment\">// 小圆圈跟随变</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 左侧按钮</span></span><br><span class=\"line\">    <span class=\"comment\">// 点击左侧按钮图片移动一张</span></span><br><span class=\"line\">    lunbo.children[<span class=\"number\">0</span>].addEventListener(<span class=\"string\">&#x27;click&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 生成第一张图片克隆</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (num == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            num = ul.children.length - <span class=\"number\">1</span>;</span><br><span class=\"line\">            ul.style.left = -num * focuswidth + <span class=\"string\">&#x27;px&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        num--;</span><br><span class=\"line\">        animate(ul, -num * focuswidth, <span class=\"number\">15</span>);</span><br><span class=\"line\">        <span class=\"comment\">// if (num == ul.children.length - 1) &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">//     ul.style.left = 0;</span></span><br><span class=\"line\">        <span class=\"comment\">//     num = 0;</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">        circle--;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (circle &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            circle = cul.children.length - <span class=\"number\">1</span>;</span><br><span class=\"line\">            cul.children[circle].className = <span class=\"string\">&#x27;current&#x27;</span>;</span><br><span class=\"line\">            cul.children[<span class=\"number\">0</span>].className = <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt;= cul.children.length - <span class=\"number\">1</span>; i++) &#123;</span><br><span class=\"line\">                cul.children[i].className = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            cul.children[circle].className = <span class=\"string\">&#x27;current&#x27;</span></span><br><span class=\"line\">            <span class=\"comment\">// 小圆圈跟随变</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"自动播放\"><a href=\"#自动播放\" class=\"headerlink\" title=\"自动播放\"></a>自动播放</h2><ol>\n<li>定时器，手动调用事件</li>\n<li>事件.click</li>\n</ol>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> timerr = <span class=\"built_in\">setInterval</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    lunbo.children[<span class=\"number\">1</span>].click();</span><br><span class=\"line\">&#125;,<span class=\"number\">2000</span>)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details> \n\n<h2 id=\"节流阀\"><a href=\"#节流阀\" class=\"headerlink\" title=\"节流阀\"></a>节流阀</h2><blockquote>\n<p>使用回调函数，在点击事件后添加一个flag=true，来控制速率</p>\n</blockquote>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">obj.onclick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">flag=<span class=\"literal\">false</span>;</span><br><span class=\"line\">animate(obj,target,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"返回顶部案例\"><a href=\"#返回顶部案例\" class=\"headerlink\" title=\"返回顶部案例\"></a>返回顶部案例</h2><ol>\n<li>方法一：使html/body元素滚轮距离顶部为0<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">btn.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.scrollTop = <span class=\"built_in\">document</span>.documentElement.scrollTop = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details></li>\n<li>方法二: 控制window滚轮的位置<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">btn.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.scroll(<span class=\"number\">0</span>,<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details></li>\n<li>方法三：引入缓动动画函数<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 第三种 引入缓动函数</span></span><br><span class=\"line\">btn.addEventListener(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    animateY(<span class=\"built_in\">window</span>,<span class=\"number\">0</span>,<span class=\"number\">15</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n</li>\n</ol>\n<h2 id=\"移动端事件\"><a href=\"#移动端事件\" class=\"headerlink\" title=\"移动端事件\"></a>移动端事件</h2><ol>\n<li>触屏事件，touchstart/touchmove/touched</li>\n<li>触摸事件TouchEvent</li>\n<li>// touches正在触摸屏幕的所有手指的列表// targetTouches  在触摸当前元素DOM的手指列表// changedTouches 检测手指列表，手指状态变化// 当手指离开屏幕时 touches和targetTouches列表没有，只能拿到changedTouches</li>\n<li>拖动元素三部曲：</li>\n</ol>\n<ul>\n<li>触摸元素touchstart：获取手指的初始位置，同时获得盒子原来的位置</li>\n<li>移动手指 touchmove 计算手指滑动距离，并且移动盒子，手指移动的距离加上盒子原来的位置</li>\n<li>离开手指 touchend</li>\n</ul>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    div&#123;</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">        width: 100px;</span><br><span class=\"line\">        height: 200px;</span><br><span class=\"line\">        background-color: rgb(24, 153, 212);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> startX = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> startY = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> y = <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> div =<span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;div&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">    div.addEventListener(<span class=\"string\">&#x27;touchstart&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;我开始模拟了&#x27;</span>);</span></span><br><span class=\"line\">        startX = e.targetTouches[0].pageX;</span><br><span class=\"line\">        startY = e.targetTouches[0].pageY;</span><br><span class=\"line\"><span class=\"javascript\">        x = <span class=\"built_in\">this</span>.offsetLeft;</span></span><br><span class=\"line\"><span class=\"javascript\">        y = <span class=\"built_in\">this</span>.offsetTop;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// touches正在触摸屏幕的所有手指的列表</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// targetTouches  在触摸当前元素DOM的手指列表</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// changedTouches 检测手指列表，手指状态变化</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// 当手指离开屏幕时 touches和targetTouches列表没有，只能拿到changedTouches</span></span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"javascript\">    div.addEventListener(<span class=\"string\">&#x27;touchmove&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> moveX = e.targetTouches[<span class=\"number\">0</span>].pageX - startX;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> moveY = e.targetTouches[<span class=\"number\">0</span>].pageY -startY;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">this</span>.style.left = x + moveX +<span class=\"string\">&#x27;px&#x27;</span>;            </span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">this</span>.style.top = y + moveY +<span class=\"string\">&#x27;px&#x27;</span>;  </span></span><br><span class=\"line\">        e.preventDefault();          </span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"移动端无缝滚动\"><a href=\"#移动端无缝滚动\" class=\"headerlink\" title=\"移动端无缝滚动\"></a>移动端无缝滚动</h2><ol>\n<li>添加监听事件，加入判断事件</li>\n<li><code>transitionend</code>,在去掉过渡效果</li>\n</ol>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&#x27;load&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> focus = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;.focus&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> foli = focus.querySelectorAll(<span class=\"string\">&#x27;li&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ul = focus.children[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">var</span> wid = focus.offsetWidth;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ol = focus.querySelector(<span class=\"string\">&#x27;ol&#x27;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(foli.length);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> index = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> timer = <span class=\"built_in\">setInterval</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        index++;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> indexw = -index * wid;</span><br><span class=\"line\">        ul.style.transition = <span class=\"string\">&#x27;all .4s&#x27;</span>;</span><br><span class=\"line\">        ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + indexw + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">    &#125;, <span class=\"number\">2000</span>)</span><br><span class=\"line\">    ul.addEventListener(<span class=\"string\">&#x27;transitionend&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;1&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index == <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">            index = <span class=\"number\">0</span>;</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(index);</span><br><span class=\"line\">            ul.style.transition = <span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> indexw = -index * wid;</span><br><span class=\"line\">            ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + indexw + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (index &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            index = <span class=\"number\">2</span>;</span><br><span class=\"line\">            ul.style.transition = <span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> indexw = -index * wid;</span><br><span class=\"line\">            ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + indexw + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        ol.querySelector(<span class=\"string\">&#x27;.current&#x27;</span>).classList.remove(<span class=\"string\">&#x27;current&#x27;</span>);</span><br><span class=\"line\">        ol.children[index].classList.add(<span class=\"string\">&#x27;current&#x27;</span>);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">var</span> startx = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> movex = <span class=\"number\">0</span>;</span><br><span class=\"line\">    ul.addEventListener(<span class=\"string\">&#x27;touchstart&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> startx = e.targetTouches[<span class=\"number\">0</span>].pageX;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(startx);</span><br><span class=\"line\">        <span class=\"built_in\">clearInterval</span>(timer);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    ul.addEventListener(<span class=\"string\">&#x27;touchmove&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> movex = e.targetTouches[<span class=\"number\">0</span>].pageX - startx;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> translatex = movex + index * -wid;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(movex);</span><br><span class=\"line\">        ul.style.transition = <span class=\"string\">&#x27;none&#x27;</span>;</span><br><span class=\"line\">        ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + translatex + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    ul.addEventListener(<span class=\"string\">&#x27;touchend&#x27;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.abs(movex) &gt; <span class=\"number\">50</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (movex &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                index--;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> translatex = -index * wid;</span><br><span class=\"line\">            ul.style.transition = <span class=\"string\">&#x27;all .4s&#x27;</span>;</span><br><span class=\"line\">            ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + translatex + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> translatex = -index * wid;</span><br><span class=\"line\">            ul.style.transition = <span class=\"string\">&#x27;all .4s&#x27;</span>;</span><br><span class=\"line\">            ul.style.transform = <span class=\"string\">&#x27;translateX(&#x27;</span> + translatex + <span class=\"string\">&#x27;px)&#x27;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n\n<h2 id=\"classList属性\"><a href=\"#classList属性\" class=\"headerlink\" title=\"classList属性\"></a>classList属性</h2><ol>\n<li><code>classList</code>属性,追加类名，和ClassName对比，不需要加<code>.</code>,移除remove，格式<code>div.classLest.add/remove</code></li>\n<li>切换类<code>document.body.classList.toggle(&#39;&#39;)</code></li>\n</ol>\n<h2 id=\"click延时解决方案\"><a href=\"#click延时解决方案\" class=\"headerlink\" title=\"click延时解决方案\"></a>click延时解决方案</h2><ol>\n<li>禁止页面的缩放</li>\n<li>封装函数，解决300ms延时情况</li>\n<li>引入js插件 <code>fastclick</code>，在GitHub仓库内</li>\n</ol>\n<details green><summary> <p>查看代码</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//https://cloud.mr90.top/hexo/4/fastclick.js</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>\n\n<h2 id=\"使用js插件-框架\"><a href=\"#使用js插件-框架\" class=\"headerlink\" title=\"使用js插件/框架\"></a>使用js插件/框架</h2><ol>\n<li>swiper的插件CDN</li>\n<li>Touchslide插件</li>\n<li>zy.media.js插件，页面适配框架适配不同浏览器</li>\n<li>框架：bootstrap（依赖JQ），vue，react，zepto</li>\n</ol>\n<h2 id=\"本地存储\"><a href=\"#本地存储\" class=\"headerlink\" title=\"本地存储\"></a>本地存储</h2><ol>\n<li>sessionStorage，生命周期为<code>关闭浏览器窗口</code></li>\n</ol>\n<ul>\n<li>格式 sessionStorage.setItem(key,value),存储</li>\n<li>sessionStorage.getItem(key)  获取</li>\n<li>sessionStorage.removeItem(key) 删除数据</li>\n<li>sessionStorage.clear();  删除全部数据</li>\n</ul>\n<ol start=\"2\">\n<li>localStroage,生命周期永久生效，使用方法雷同</li>\n</ol>\n<details green><summary> <p>查看实例</p> </summary>\n              <div class='content'>\n              <figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;inp&quot;</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;checkbox&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;inp1&quot;</span>&gt;</span>记住用户</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> inp = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#inp&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> inp1 = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">&#x27;#inp1&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span>(<span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&#x27;inp&#x27;</span>))&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        inp.value = <span class=\"built_in\">localStorage</span>.getItem(<span class=\"string\">&#x27;inp&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        inp1.checked = <span class=\"literal\">true</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"javascript\">    inp1.addEventListener(<span class=\"string\">&#x27;change&#x27;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">this</span>.checked &amp;&amp; inp.value != <span class=\"string\">&#x27;&#x27;</span>)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">localStorage</span>.setItem(<span class=\"string\">&#x27;inp&#x27;</span>,inp.value)</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">console</span>.log(inp.value);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"built_in\">localStorage</span>.removeItem(<span class=\"string\">&#x27;inp&#x27;</span>)</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n              </div>\n            </details>","categories":[{"name":"web","path":"api/categories/web.json"},{"name":"Javascript","path":"api/categories/Javascript.json"}],"tags":[]}