{"title":"Redis配置教程，大幅度加速WordPress网站","slug":"redis","date":"2020-11-18T12:50:00.000Z","updated":"2021-09-04T08:15:24.608Z","comments":true,"path":"api/articles/redis.json","excerpt":null,"covers":["https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/3/d7d6c380fd4abe5e4726d961326719bb.jpeg","https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/3/1b8f016c528791f7894c7b52baacf51c.jpeg"],"content":"<h2 id=\"1-redis\"><a href=\"#1-redis\" class=\"headerlink\" title=\"1.redis\"></a>1.redis</h2><pre><code> Redis运行在内存中但是可以持久化到磁盘，所以在对不同数据集进行高速读写时需要权衡内存，因为数据量不能大于硬件内存。在内存数据库方面的另一个优点是，相比在磁盘上相同的复杂的数据结构，在内存中操作起来非常简单，这样Redis可以做很多内部复杂性很强的事情。同时，在磁盘格式方面他们是紧凑的以追加的方式产生的，因为他们并不需要进行随机访问。\n</code></pre>\n<h2 id=\"2-安装php扩展\"><a href=\"#2-安装php扩展\" class=\"headerlink\" title=\"2.安装php扩展\"></a>2.安装php扩展</h2><ul>\n<li>这里我使用的是<code>宝塔</code>，首先打开软件商城，找到php点击设置安装扩展，如下图</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/3/d7d6c380fd4abe5e4726d961326719bb.jpeg\" alt=\"安装redis即可\"></p>\n<h2 id=\"3-进入wordpress后台\"><a href=\"#3-进入wordpress后台\" class=\"headerlink\" title=\"3.进入wordpress后台\"></a>3.进入wordpress后台</h2><p>1.安装插件<code>Redis Object Cache</code>和<code>W3 Total Cache</code><br><img src=\"https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/3/1b8f016c528791f7894c7b52baacf51c.jpeg\"><br>2.如果显示502无法安装，这里我提供了两种方法</p>\n<p>(1)第一种：安装插件 <code>WP-china-Yes</code>国内服务器使用</p>\n<p>【<a href=\"https://grr.lanzous.com/iBF5viivlxg\">下载地址</a>】安装完之后再去下载redis和w3</p>\n<p>(2)第二种：直接下载然后上传到wordpress</p>\n<ul>\n<li><div class=\"github-badge\"><a style=\"color:#FFFFFF\" href=\"https://downloads.wordpress.org/plugin/redis-cache.2.0.15.zip\"><span class=\"badge-subject\"><i style=\"color:#0071b2\" class=\"fa fa-cloud-download\"></i>官网</span><span class=\"badge-value bg-blueviolet\">下载地址</span></a></div>\n\n</li>\n</ul>\n<ul><li><div class=\"github-badge\"><a style=\"color:#FFFFFF\" href=\"https://grr.lanzous.com/b015wtlcb\" target=\"_blank\" rel=\"noopener noreferrer\"><span class=\"badge-subject\"><i class=\"fa fa-cloud-download\" style=\"color:#0071b2\"></i>蓝奏</span><span class=\"badge-value bg-blueviolet\">下载地址</span></a></div></li></ul>\n\n<p>安装之后打开<code>Redis Object Cache</code>点击第一个按钮，其他默认，显示<code> connect</code> 说明配置已完成</p>\n<h2 id=\"4-配置缓存设置\"><a href=\"#4-配置缓存设置\" class=\"headerlink\" title=\"4.配置缓存设置\"></a>4.配置缓存设置</h2><p>1.网络上好多人都是在wp_config.php中配置，我设置完之后，刷新页面感觉速度明显加强，基本完成，如果效果不明显，继续配置<br>2.找到<code>wp_config.php</code>将以下代码写入即可，注意redis的密码是否设置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(&#39;WP_REDIS_CLIENT&#39;, &#39;pecl&#39;); &#x2F;&#x2F; 指定用于与 Redis 通信的客户端, pecl 即 The PHP Extension Community Library</span><br><span class=\"line\">define(&#39;WP_REDIS_SCHEME&#39;, &#39;tcp&#39;); &#x2F;&#x2F; 指定用于与 Redis 实例进行通信的协议</span><br><span class=\"line\">define(&#39;WP_REDIS_HOST&#39;, &#39;127.0.0.1&#39;); &#x2F;&#x2F; Redis 服务器的 IP 或主机名</span><br><span class=\"line\">define(&#39;WP_REDIS_PORT&#39;, &#39;6379&#39;); &#x2F;&#x2F; Redis 端口</span><br><span class=\"line\">define(&#39;WP_REDIS_DATABASE&#39;, &#39;0&#39;); &#x2F;&#x2F; 接受用于使用该 SELECT 命令自动选择逻辑数据库的数值</span><br><span class=\"line\">define(&#39;WP_REDIS_PASSWORD&#39;, &#39;这里看你自己设定的&#39;); &#x2F;&#x2F; Redis 密码</span><br><span class=\"line\">define(&#39;WP_CACHE_KEY_SALT&#39;, &#39;wp_&#39;); &#x2F;&#x2F; 设置所有缓存键的前缀（ WordPress 多站点模式下使用）</span><br><span class=\"line\">define(&#39;WP_REDIS_MAXTTL&#39;, &#39;86400&#39;);</span><br></pre></td></tr></table></figure>\n\n\n","more":"<h2 id=\"1-redis\"><a href=\"#1-redis\" class=\"headerlink\" title=\"1.redis\"></a>1.redis</h2><pre><code> Redis运行在内存中但是可以持久化到磁盘，所以在对不同数据集进行高速读写时需要权衡内存，因为数据量不能大于硬件内存。在内存数据库方面的另一个优点是，相比在磁盘上相同的复杂的数据结构，在内存中操作起来非常简单，这样Redis可以做很多内部复杂性很强的事情。同时，在磁盘格式方面他们是紧凑的以追加的方式产生的，因为他们并不需要进行随机访问。\n</code></pre>\n<h2 id=\"2-安装php扩展\"><a href=\"#2-安装php扩展\" class=\"headerlink\" title=\"2.安装php扩展\"></a>2.安装php扩展</h2><ul>\n<li>这里我使用的是<code>宝塔</code>，首先打开软件商城，找到php点击设置安装扩展，如下图</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/3/d7d6c380fd4abe5e4726d961326719bb.jpeg\" alt=\"安装redis即可\"></p>\n<h2 id=\"3-进入wordpress后台\"><a href=\"#3-进入wordpress后台\" class=\"headerlink\" title=\"3.进入wordpress后台\"></a>3.进入wordpress后台</h2><p>1.安装插件<code>Redis Object Cache</code>和<code>W3 Total Cache</code><br><img src=\"https://cdn.jsdelivr.net/gh/Rr210/image@master/hexo/3/1b8f016c528791f7894c7b52baacf51c.jpeg\"><br>2.如果显示502无法安装，这里我提供了两种方法</p>\n<p>(1)第一种：安装插件 <code>WP-china-Yes</code>国内服务器使用</p>\n<p>【<a href=\"https://grr.lanzous.com/iBF5viivlxg\">下载地址</a>】安装完之后再去下载redis和w3</p>\n<p>(2)第二种：直接下载然后上传到wordpress</p>\n<ul>\n<li><div class=\"github-badge\"><a style=\"color:#FFFFFF\" href=\"https://downloads.wordpress.org/plugin/redis-cache.2.0.15.zip\"><span class=\"badge-subject\"><i style=\"color:#0071b2\" class=\"fa fa-cloud-download\"></i>官网</span><span class=\"badge-value bg-blueviolet\">下载地址</span></a></div>\n\n</li>\n</ul>\n<ul><li><div class=\"github-badge\"><a style=\"color:#FFFFFF\" href=\"https://grr.lanzous.com/b015wtlcb\" target=\"_blank\" rel=\"noopener noreferrer\"><span class=\"badge-subject\"><i class=\"fa fa-cloud-download\" style=\"color:#0071b2\"></i>蓝奏</span><span class=\"badge-value bg-blueviolet\">下载地址</span></a></div></li></ul>\n\n<p>安装之后打开<code>Redis Object Cache</code>点击第一个按钮，其他默认，显示<code> connect</code> 说明配置已完成</p>\n<h2 id=\"4-配置缓存设置\"><a href=\"#4-配置缓存设置\" class=\"headerlink\" title=\"4.配置缓存设置\"></a>4.配置缓存设置</h2><p>1.网络上好多人都是在wp_config.php中配置，我设置完之后，刷新页面感觉速度明显加强，基本完成，如果效果不明显，继续配置<br>2.找到<code>wp_config.php</code>将以下代码写入即可，注意redis的密码是否设置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(&#39;WP_REDIS_CLIENT&#39;, &#39;pecl&#39;); &#x2F;&#x2F; 指定用于与 Redis 通信的客户端, pecl 即 The PHP Extension Community Library</span><br><span class=\"line\">define(&#39;WP_REDIS_SCHEME&#39;, &#39;tcp&#39;); &#x2F;&#x2F; 指定用于与 Redis 实例进行通信的协议</span><br><span class=\"line\">define(&#39;WP_REDIS_HOST&#39;, &#39;127.0.0.1&#39;); &#x2F;&#x2F; Redis 服务器的 IP 或主机名</span><br><span class=\"line\">define(&#39;WP_REDIS_PORT&#39;, &#39;6379&#39;); &#x2F;&#x2F; Redis 端口</span><br><span class=\"line\">define(&#39;WP_REDIS_DATABASE&#39;, &#39;0&#39;); &#x2F;&#x2F; 接受用于使用该 SELECT 命令自动选择逻辑数据库的数值</span><br><span class=\"line\">define(&#39;WP_REDIS_PASSWORD&#39;, &#39;这里看你自己设定的&#39;); &#x2F;&#x2F; Redis 密码</span><br><span class=\"line\">define(&#39;WP_CACHE_KEY_SALT&#39;, &#39;wp_&#39;); &#x2F;&#x2F; 设置所有缓存键的前缀（ WordPress 多站点模式下使用）</span><br><span class=\"line\">define(&#39;WP_REDIS_MAXTTL&#39;, &#39;86400&#39;);</span><br></pre></td></tr></table></figure>\n\n\n","categories":[{"name":"技术·教程","path":"api/categories/技术·教程.json"}],"tags":[{"name":"PHP","path":"api/tags/PHP.json"}]}